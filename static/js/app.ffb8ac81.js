(function(){"use strict";var e={766:function(e,t,n){var i=n(751),a=n(641);const o={id:"app"},r={key:0,class:"tab-content"},c={key:1,class:"tab-content"},u={key:2,class:"tab-content"};function s(e,t,n,i,s,d){const l=(0,a.g2)("Navigation"),p=(0,a.g2)("SearchForm"),m=(0,a.g2)("ResultDisplay"),g=(0,a.g2)("ProductList"),y=(0,a.g2)("DataManagement");return(0,a.uX)(),(0,a.CE)("div",o,[t[0]||(t[0]=(0,a.Lk)("header",null,[(0,a.Lk)("h1",null,"레알팜 게임 핼퍼")],-1)),(0,a.Lk)("main",null,[(0,a.bF)(l,{currentTab:s.currentTab,onTabChange:d.switchTab},null,8,["currentTab","onTabChange"]),"search"===s.currentTab?((0,a.uX)(),(0,a.CE)("div",r,[(0,a.bF)(p,{onSearch:d.handleSearch},null,8,["onSearch"]),s.result?((0,a.uX)(),(0,a.Wv)(m,{key:0,result:s.result},null,8,["result"])):(0,a.Q3)("",!0)])):(0,a.Q3)("",!0),"list"===s.currentTab?((0,a.uX)(),(0,a.CE)("div",c,[(0,a.bF)(g,{onProductDeleted:d.handleProductDeleted},null,8,["onProductDeleted"])])):(0,a.Q3)("",!0),"data"===s.currentTab?((0,a.uX)(),(0,a.CE)("div",u,[(0,a.bF)(y,{onDataChanged:d.handleDataChanged},null,8,["onDataChanged"])])):(0,a.Q3)("",!0)])])}const d={class:"search-form"},l={class:"products-list"},p=["onUpdate:modelValue","placeholder","onKeyup","onKeydown"],m=["onUpdate:modelValue","onKeyup","onKeydown"],g=["onClick","disabled","title"],y=["disabled"];function h(e,t,n,o,r,c){return(0,a.uX)(),(0,a.CE)("div",d,[t[4]||(t[4]=(0,a.Lk)("h2",null,"가공품 검색",-1)),(0,a.Lk)("div",l,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.productItems,(e,t)=>((0,a.uX)(),(0,a.CE)("div",{key:t,class:"product-item-row"},[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t=>e.name=t,type:"text",placeholder:`가공품 이름 ${t+1}`,class:"product-name-input",ref_for:!0,ref:`nameInput-${t}`,onKeyup:(0,i.jR)(e=>c.focusQuantity(t),["enter"]),onKeydown:[(0,i.jR)((0,i.D$)(e=>c.handleTabOnName(t,e),["prevent"]),["tab"]),(0,i.jR)(e=>c.handleDeleteOnName(t,e),["delete"]),(0,i.jR)(e=>c.handleBackspaceOnName(t,e),["backspace"])]},null,40,p),[[i.Jo,e.name]]),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t=>e.quantity=t,type:"number",min:"1",placeholder:"개수",class:"quantity-input",ref_for:!0,ref:`quantityInput-${t}`,onKeyup:(0,i.jR)(e=>c.handleEnterOnQuantity(t,e),["enter"]),onKeydown:[(0,i.jR)((0,i.D$)(e=>c.handleTabOnQuantity(t,e),["prevent"]),["tab"]),(0,i.jR)(e=>c.handleDeleteOnQuantity(t,e),["delete"]),(0,i.jR)(e=>c.handleBackspaceOnQuantity(t,e),["backspace"])]},null,40,m),[[i.Jo,e.quantity,void 0,{number:!0}]]),(0,a.Lk)("button",{onClick:e=>c.removeProduct(t),class:"remove-btn",disabled:1===r.productItems.length,type:"button",title:1===r.productItems.length?"최소 1개는 유지해야 합니다":"삭제 (Ctrl+Delete 또는 빈 필드에서 Backspace)"}," 삭제 ",8,g)]))),128)),(0,a.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>c.addProduct&&c.addProduct(...e)),class:"add-product-btn",type:"button"},[...t[2]||(t[2]=[(0,a.eW)(" + 가공품 추가 ",-1),(0,a.Lk)("span",{class:"shortcut-hint"},"(Ctrl+Enter 또는 개수 입력 후 Tab)",-1)])])]),(0,a.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>c.handleSearch&&c.handleSearch(...e)),disabled:!c.isValid,class:"search-btn",ref:"searchButton"},[...t[3]||(t[3]=[(0,a.eW)(" 검색 ",-1),(0,a.Lk)("span",{class:"shortcut-hint"},"(Enter)",-1)])],8,y)])}var b=JSON.parse('{"Z":[{"id":"hyeonmi","name":"현미","building":"정미소","ingredients":[{"type":"crop","name":"벼","count":30}]},{"id":"baekmi","name":"백미","building":"정미소","ingredients":[{"type":"product","name":"현미","count":1}]},{"id":"chapssal","name":"찹쌀","building":"정미소","ingredients":[{"type":"crop","name":"찰벼","count":30}]},{"id":"heukmi","name":"흑미","building":"정미소","ingredients":[{"type":"crop","name":"흑미벼","count":30}]},{"id":"yeotgireum","name":"엿기름","building":"정미소","ingredients":[{"type":"crop","name":"보리","count":30}]},{"id":"baeami","name":"배아미","building":"정미소","ingredients":[{"type":"crop","name":"벼","count":40}]},{"id":"balahyeonmi","name":"발아현미","building":"정미소","ingredients":[{"type":"product","name":"현미","count":1}]},{"id":"wanggyeo","name":"왕겨","building":"정미소","ingredients":[{"type":"crop","name":"벼","count":50}]},{"id":"byeotjip","name":"볏짚","building":"정미소","ingredients":[{"type":"crop","name":"벼","count":50}]},{"id":"chamgireum","name":"참기름","building":"기름집","ingredients":[{"type":"crop","name":"참깨","count":30}]},{"id":"sikyongyu","name":"식용유","building":"기름집","ingredients":[{"type":"crop","name":"대두","count":30}]},{"id":"deulgireum","name":"들기름","building":"기름집","ingredients":[{"type":"crop","name":"들깨","count":30}]},{"id":"seoltang","name":"설탕","building":"제당소","ingredients":[{"type":"crop","name":"사탕수수","count":30}]},{"id":"mullyeot","name":"물엿","building":"제당소","ingredients":[{"type":"product","name":"엿기름","count":1}]},{"id":"gochutgaru","name":"고춧가루","building":"방앗간","ingredients":[{"type":"crop","name":"고추","count":30}]},{"id":"milgaru","name":"밀가루","building":"방앗간","ingredients":[{"type":"crop","name":"밀","count":30}]},{"id":"ssalgaru","name":"쌀가루","building":"방앗간","ingredients":[{"type":"product","name":"백미","count":1}]},{"id":"chapssalgaru","name":"찹쌀가루","building":"방앗간","ingredients":[{"type":"product","name":"찹쌀","count":1}]},{"id":"jeonbun","name":"전분","building":"방앗간","ingredients":[{"type":"crop","name":"옥수수","count":30}]},{"id":"konggaru","name":"콩가루","building":"방앗간","ingredients":[{"type":"crop","name":"대두","count":30}]},{"id":"memilgaru","name":"메밀가루","building":"방앗간","ingredients":[{"type":"crop","name":"메밀","count":30}]},{"id":"dubu","name":"두부","building":"두부집","ingredients":[{"type":"crop","name":"대두","count":20},{"type":"crop","name":"응고제","count":5}]},{"id":"yeondubu","name":"연두부","building":"두부집","ingredients":[{"type":"crop","name":"대두","count":30},{"type":"crop","name":"응고제","count":4}]},{"id":"sundubu","name":"순두부","building":"두부집","ingredients":[{"type":"crop","name":"대두","count":40},{"type":"crop","name":"응고제","count":3}]},{"id":"yubu","name":"유부","building":"두부집","ingredients":[{"type":"product","name":"두부","count":1},{"type":"product","name":"식용유","count":1}]},{"id":"memilmuk","name":"메밀묵","building":"두부집","ingredients":[{"type":"product","name":"메밀가루","count":1},{"type":"product","name":"참기름","count":1},{"type":"crop","name":"소금","count":5}]},{"id":"garaetteok","name":"가래떡","building":"떡집","ingredients":[{"type":"product","name":"찹쌀가루","count":1},{"type":"crop","name":"소금","count":5}]},{"id":"sirutteok","name":"시루떡","building":"떡집","ingredients":[{"type":"product","name":"찹쌀가루","count":1},{"type":"crop","name":"팥","count":30},{"type":"crop","name":"소금","count":5}]},{"id":"songpyeon","name":"송편","building":"떡집","ingredients":[{"type":"product","name":"찹쌀가루","count":1},{"type":"crop","name":"참깨","count":30},{"type":"product","name":"설탕","count":1}]},{"id":"baekseolgi","name":"백설기","building":"떡집","ingredients":[{"type":"product","name":"찹쌀가루","count":1},{"type":"product","name":"설탕","count":1},{"type":"crop","name":"소금","count":5}]},{"id":"ssukgaetteok","name":"쑥개떡","building":"떡집","ingredients":[{"type":"product","name":"찹쌀가루","count":1},{"type":"crop","name":"개똥쑥","count":30},{"type":"product","name":"참기름","count":1},{"type":"crop","name":"소금","count":5}]},{"id":"iljeolmi","name":"일절미","building":"떡집","ingredients":[{"type":"product","name":"찹쌀가루","count":1},{"type":"product","name":"콩가루","count":1},{"type":"product","name":"설탕","count":1},{"type":"crop","name":"소금","count":5}]},{"id":"ssukpattteok","name":"쑥팥떡","building":"떡집","ingredients":[{"type":"product","name":"쑥개떡","count":1},{"type":"crop","name":"팥","count":30}]},{"id":"hobakgoji","name":"호박고지","building":"건조장","ingredients":[{"type":"crop","name":"천둥호박","count":30}]},{"id":"gogumamallaengi","name":"고구마말랭이","building":"건조장","ingredients":[{"type":"crop","name":"고구마","count":30}]},{"id":"mumallaengi","name":"무말랭이","building":"건조장","ingredients":[{"type":"crop","name":"무","count":30}]},{"id":"geontomato","name":"건토마토","building":"건조장","ingredients":[{"type":"crop","name":"토마토","count":30}]},{"id":"mallinpineapple","name":"말린파인애플","building":"건조장","ingredients":[{"type":"crop","name":"파인애플","count":30}]},{"id":"geonpodo","name":"건포도","building":"건조장","ingredients":[{"type":"crop","name":"포도","count":30}]},{"id":"geonjomango","name":"건조망고","building":"건조장","ingredients":[{"type":"crop","name":"애플망고","count":30}]},{"id":"nurungji","name":"누룽지","building":"건조장","ingredients":[{"type":"product","name":"백미","count":1}]},{"id":"hobakjeup","name":"호박즙","building":"즙제조장","ingredients":[{"type":"crop","name":"천둥호박","count":30}]},{"id":"gaettongssukjeup","name":"개똥쑥즙","building":"즙제조장","ingredients":[{"type":"crop","name":"개똥쑥","count":30}]},{"id":"yangbaechujeup","name":"양배추즙","building":"즙제조장","ingredients":[{"type":"crop","name":"양배추","count":30},{"type":"crop","name":"당근","count":30}]},{"id":"baedorajijeup","name":"배도라지즙","building":"즙제조장","ingredients":[{"type":"crop","name":"배","count":30},{"type":"crop","name":"도라지","count":30}]},{"id":"geongangjeup","name":"건강즙","building":"즙제조장","ingredients":[{"type":"crop","name":"여주","count":30},{"type":"crop","name":"삼채","count":30}]},{"id":"yachaejeup","name":"야채즙","building":"즙제조장","ingredients":[{"type":"product","name":"양배추즙","count":1},{"type":"crop","name":"브로콜리","count":30},{"type":"crop","name":"콜라비","count":30}]},{"id":"beoseotjeup","name":"버섯즙","building":"즙제조장","ingredients":[{"type":"crop","name":"가시오가피","count":30},{"type":"crop","name":"상황버섯","count":30},{"type":"crop","name":"차가버섯","count":30},{"type":"crop","name":"노루궁뎅이버섯","count":30}]},{"id":"sikcho","name":"식초","building":"소스제조장","ingredients":[{"type":"crop","name":"사과","count":30},{"type":"product","name":"설탕","count":1},{"type":"crop","name":"이스트","count":5}]},{"id":"mayonnaise","name":"마요네즈","building":"소스제조장","ingredients":[{"type":"product","name":"식초","count":1},{"type":"crop","name":"달걀","count":5},{"type":"crop","name":"소금","count":5}]},{"id":"gyeojasauce","name":"겨자소스","building":"소스제조장","ingredients":[{"type":"crop","name":"겨자","count":30},{"type":"product","name":"설탕","count":1},{"type":"product","name":"전분","count":1},{"type":"product","name":"식초","count":1}]},{"id":"ketchup","name":"케첩","building":"소스제조장","ingredients":[{"type":"crop","name":"토마토","count":30},{"type":"crop","name":"양파","count":30},{"type":"product","name":"설탕","count":1},{"type":"product","name":"식초","count":1}]},{"id":"baechukimchi","name":"배추김치","building":"김치전문점","ingredients":[{"type":"crop","name":"배추","count":30},{"type":"product","name":"고춧가루","count":1},{"type":"crop","name":"소금","count":5}]},{"id":"dongchimi","name":"동치미","building":"김치전문점","ingredients":[{"type":"crop","name":"무","count":30},{"type":"crop","name":"배","count":30},{"type":"crop","name":"생강","count":30},{"type":"crop","name":"소금","count":5}]},{"id":"kkakdugi","name":"깍두기","building":"김치전문점","ingredients":[{"type":"crop","name":"무","count":30},{"type":"crop","name":"미나리","count":30},{"type":"product","name":"고춧가루","count":1},{"type":"crop","name":"소금","count":5}]},{"id":"oisobagi","name":"오이소박이","building":"김치전문점","ingredients":[{"type":"crop","name":"오이","count":30},{"type":"crop","name":"양파","count":30},{"type":"product","name":"고춧가루","count":1},{"type":"crop","name":"소금","count":5}]},{"id":"pakimchi","name":"파김치","building":"김치전문점","ingredients":[{"type":"crop","name":"파","count":30},{"type":"product","name":"고춧가루","count":1},{"type":"product","name":"설탕","count":1},{"type":"crop","name":"소금","count":5}]},{"id":"mumallaengimuchim","name":"무말랭이무침","building":"김치전문점","ingredients":[{"type":"product","name":"무말랭이","count":1},{"type":"product","name":"고춧가루","count":1},{"type":"product","name":"간장","count":1},{"type":"product","name":"참기름","count":1}]},{"id":"hanji","name":"한지","building":"인쇄소","ingredients":[{"type":"crop","name":"닥나무","count":30}]},{"id":"mosi","name":"모시","building":"방직소","ingredients":[{"type":"crop","name":"모시풀","count":30}]},{"id":"som","name":"솜","building":"방직소","ingredients":[{"type":"crop","name":"목화","count":30}]},{"id":"nuegochi","name":"누에고치","building":"방직소","ingredients":[{"type":"crop","name":"뽕잎","count":5}]},{"id":"myeongjusil","name":"명주실","building":"방직소","ingredients":[{"type":"product","name":"누에고치","count":2}]},{"id":"sil","name":"실","building":"방직소","ingredients":[{"type":"product","name":"솜","count":1}]},{"id":"myeonjigmul","name":"면직물","building":"방직소","ingredients":[{"type":"product","name":"실","count":1}]},{"id":"bidan","name":"비단","building":"방직소","ingredients":[{"type":"product","name":"명주실","count":1}]},{"id":"batjul","name":"밧줄","building":"방직소","ingredients":[{"type":"product","name":"면직물","count":1}]},{"id":"hanbok","name":"한복","building":"한복점","ingredients":[{"type":"product","name":"비단","count":1}]},{"id":"syeocheu","name":"셔츠","building":"양복점","ingredients":[{"type":"product","name":"면직물","count":3}]},{"id":"milguksumyeon","name":"밀국수면","building":"제면소","ingredients":[{"type":"product","name":"밀가루","count":1},{"type":"crop","name":"소금","count":5}]},{"id":"ssalguksumyeon","name":"쌀국수면","building":"제면소","ingredients":[{"type":"product","name":"쌀가루","count":1},{"type":"crop","name":"소금","count":5}]},{"id":"memilmyeon","name":"메밀면","building":"제면소","ingredients":[{"type":"product","name":"메밀가루","count":1},{"type":"product","name":"밀가루","count":1},{"type":"crop","name":"소금","count":5}]},{"id":"ramyeonmyeon","name":"라면면","building":"제면소","ingredients":[{"type":"product","name":"밀가루","count":1},{"type":"product","name":"식용유","count":2},{"type":"crop","name":"소금","count":5}]},{"id":"udongmyeon","name":"우동면","building":"제면소","ingredients":[{"type":"product","name":"밀가루","count":1},{"type":"product","name":"식초","count":1},{"type":"crop","name":"소금","count":5}]},{"id":"oipikel","name":"오이피클","building":"절임장","ingredients":[{"type":"crop","name":"오이","count":30},{"type":"product","name":"설탕","count":1},{"type":"product","name":"식초","count":1},{"type":"crop","name":"소금","count":5}]},{"id":"dubupikel","name":"두부피클","building":"절임장","ingredients":[{"type":"product","name":"두부","count":2},{"type":"product","name":"설탕","count":1},{"type":"product","name":"식초","count":1},{"type":"crop","name":"소금","count":5}]},{"id":"deodeokjangajji","name":"더덕장아찌","building":"절임장","ingredients":[{"type":"crop","name":"더덕","count":30},{"type":"product","name":"고추장","count":1},{"type":"product","name":"설탕","count":1},{"type":"product","name":"참기름","count":1}]},{"id":"chamoejangajji","name":"참외장아찌","building":"절임장","ingredients":[{"type":"crop","name":"참외","count":30},{"type":"product","name":"설탕","count":1},{"type":"product","name":"간장","count":1},{"type":"product","name":"식초","count":1}]},{"id":"kollabissammu","name":"콜라비쌈무","building":"절임장","ingredients":[{"type":"crop","name":"콜라비","count":30},{"type":"product","name":"설탕","count":1},{"type":"product","name":"식초","count":1},{"type":"product","name":"겨자소스","count":1}]},{"id":"jangmikkotcha","name":"장미꽃차","building":"전통찻집","ingredients":[{"type":"crop","name":"장미","count":30}]},{"id":"insamcha","name":"인삼차","building":"전통찻집","ingredients":[{"type":"crop","name":"인삼","count":30},{"type":"crop","name":"생강","count":30}]},{"id":"heobeucha","name":"허브차","building":"전통찻집","ingredients":[{"type":"crop","name":"로즈마리","count":30},{"type":"crop","name":"캐모마일","count":30},{"type":"crop","name":"페퍼민트","count":30}]},{"id":"sagwajam","name":"사과잼","building":"잼제조장","ingredients":[{"type":"crop","name":"사과","count":30},{"type":"product","name":"설탕","count":2}]},{"id":"ttalgijam","name":"딸기잼","building":"잼제조장","ingredients":[{"type":"crop","name":"딸기","count":30},{"type":"product","name":"설탕","count":2}]},{"id":"gamgyuljam","name":"감귤잼","building":"잼제조장","ingredients":[{"type":"crop","name":"감귤","count":30},{"type":"product","name":"설탕","count":2}]},{"id":"ttangkongjam","name":"땅콩잼","building":"잼제조장","ingredients":[{"type":"crop","name":"땅콩","count":30},{"type":"crop","name":"소금","count":5}]},{"id":"papeurikajam","name":"파프리카잼","building":"잼제조장","ingredients":[{"type":"crop","name":"파프리카","count":30},{"type":"product","name":"설탕","count":2}]},{"id":"boksungajam","name":"복숭아잼","building":"잼제조장","ingredients":[{"type":"crop","name":"복숭아","count":30},{"type":"product","name":"설탕","count":2}]},{"id":"somsatang","name":"솜사탕","building":"단구슬집","ingredients":[{"type":"product","name":"설탕","count":2}]},{"id":"nurungjisatang","name":"누룽지사탕","building":"단구슬집","ingredients":[{"type":"product","name":"누룽지","count":2},{"type":"product","name":"설탕","count":2}]},{"id":"bakhasatang","name":"박하사탕","building":"단구슬집","ingredients":[{"type":"crop","name":"박하","count":30},{"type":"product","name":"설탕","count":2}]},{"id":"keopisatang","name":"커피사탕","building":"단구슬집","ingredients":[{"type":"crop","name":"커피","count":30},{"type":"product","name":"설탕","count":2}]},{"id":"hobakyeot","name":"호박엿","building":"단구슬집","ingredients":[{"type":"crop","name":"천둥호박","count":30},{"type":"product","name":"들기름","count":2}]},{"id":"ssalyeot","name":"쌀엿","building":"단구슬집","ingredients":[{"type":"product","name":"백미","count":1},{"type":"product","name":"콩가루","count":2},{"type":"product","name":"엿기름","count":2}]},{"id":"ttangkongyeot","name":"땅콩엿","building":"단구슬집","ingredients":[{"type":"crop","name":"땅콩","count":30},{"type":"crop","name":"참깨","count":30},{"type":"product","name":"엿기름","count":2}]},{"id":"duyu","name":"두유","building":"음료점","ingredients":[{"type":"crop","name":"대두","count":30},{"type":"crop","name":"우유","count":5}]},{"id":"insamjuseu","name":"인삼주스","building":"음료점","ingredients":[{"type":"crop","name":"인삼","count":30},{"type":"product","name":"두유","count":2}]},{"id":"geongangjuseu","name":"건강주스","building":"음료점","ingredients":[{"type":"crop","name":"토마토","count":30},{"type":"crop","name":"알로에","count":30},{"type":"crop","name":"수박","count":30},{"type":"crop","name":"브로콜리","count":30}]},{"id":"misutgaru","name":"미숫가루","building":"음료점","ingredients":[{"type":"product","name":"쌀가루","count":1},{"type":"product","name":"콩가루","count":2},{"type":"product","name":"두유","count":2},{"type":"product","name":"설탕","count":1}]},{"id":"sikhye","name":"식혜","building":"음료점","ingredients":[{"type":"product","name":"백미","count":1},{"type":"product","name":"엿기름","count":2},{"type":"product","name":"물엿","count":2},{"type":"crop","name":"생강","count":30}]},{"id":"janchiguksu","name":"잔치국수","building":"국수전문점","ingredients":[{"type":"product","name":"밀국수면","count":1},{"type":"product","name":"간장","count":1},{"type":"crop","name":"애호박","count":30},{"type":"crop","name":"당근","count":30}]},{"id":"doenjang","name":"된장","building":"장집","ingredients":[{"type":"crop","name":"대두","count":30},{"type":"crop","name":"소금","count":5},{"type":"crop","name":"발효액","count":5}]},{"id":"ganjang","name":"간장","building":"장집","ingredients":[{"type":"crop","name":"대두","count":30},{"type":"product","name":"밀가루","count":1},{"type":"crop","name":"소금","count":5}]},{"id":"gochujang","name":"고추장","building":"장집","ingredients":[{"type":"product","name":"찹쌀가루","count":1},{"type":"product","name":"고춧가루","count":1},{"type":"product","name":"엿기름","count":1},{"type":"crop","name":"소금","count":5}]}]}');const k="realfarm_custom_products";function f(){try{const e=localStorage.getItem(k);return e?JSON.parse(e):[]}catch(e){return console.error("Failed to load custom products:",e),[]}}function v(e){try{return localStorage.setItem(k,JSON.stringify(e)),!0}catch(t){return console.error("Failed to save custom products:",t),!1}}function C(){const e=b.Z||[],t=f(),n=new Map;return e.forEach(e=>{n.set(e.id,{...e,isCustom:!1})}),t.forEach(e=>{n.set(e.id,{...e,isCustom:!0})}),Array.from(n.values())}function L(e){const t=f();if(t.some(t=>t.id===e.id))return{success:!1,error:"이미 존재하는 ID입니다."};const n=C();if(n.some(t=>t.name===e.name&&t.id!==e.id))return{success:!1,error:"이미 존재하는 가공품 이름입니다."};t.push(e);const i=v(t);return i?{success:!0}:{success:!1,error:"저장에 실패했습니다."}}function E(e,t){const n=f(),i=n.findIndex(t=>t.id===e);if(-1===i)return{success:!1,error:"가공품을 찾을 수 없습니다."};const a=C();if(a.some(n=>n.name===t.name&&n.id!==e))return{success:!1,error:"이미 존재하는 가공품 이름입니다."};n[i]={...t,id:e};const o=v(n);return o?{success:!0}:{success:!1,error:"수정에 실패했습니다."}}function I(e){const t=f(),n=t.filter(t=>t.id!==e);if(n.length===t.length)return{success:!1,error:"가공품을 찾을 수 없습니다."};const i=v(n);return i?{success:!0}:{success:!1,error:"삭제에 실패했습니다."}}function D(){try{const e=f(),t=JSON.stringify(e,null,2),n=new Blob([t],{type:"application/json"}),i=URL.createObjectURL(n),a=document.createElement("a");return a.href=i,a.download=`realfarm-products-${(new Date).toISOString().split("T")[0]}.json`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(i),{success:!0}}catch(e){return console.error("Failed to export products:",e),{success:!1,error:"내보내기에 실패했습니다."}}}function w(e){return new Promise(t=>{const n=new FileReader;n.onload=e=>{try{const n=JSON.parse(e.target.result);if(!Array.isArray(n))return void t({success:!1,error:"잘못된 파일 형식입니다. 배열이어야 합니다."});const i=n.filter(e=>e.id&&e.name&&e.building&&Array.isArray(e.ingredients));if(0===i.length)return void t({success:!1,error:"유효한 가공품 데이터가 없습니다."});const a=f(),o=new Map;a.forEach(e=>o.set(e.id,e)),i.forEach(e=>o.set(e.id,e));const r=Array.from(o.values()),c=v(r);t(c?{success:!0,imported:i.length,total:r.length}:{success:!1,error:"저장에 실패했습니다."})}catch(e){console.error("Failed to import products:",e),t({success:!1,error:"파일을 읽는 중 오류가 발생했습니다."})}},n.onerror=()=>{t({success:!1,error:"파일을 읽는 중 오류가 발생했습니다."})},n.readAsText(e)})}var P={name:"SearchForm",emits:["search"],data(){return{productItems:[{name:"",quantity:1}]}},computed:{isValid(){return this.productItems.length>0&&this.productItems.every(e=>""!==e.name.trim()&&e.quantity>0)}},methods:{addProduct(){this.productItems.push({name:"",quantity:1}),this.$nextTick(()=>{const e=this.productItems.length-1,t=this.$refs[`nameInput-${e}`];t&&t[0]?t[0].focus():t&&t.focus()})},removeProduct(e){this.productItems.length>1&&(this.productItems.splice(e,1),this.$nextTick(()=>{const t=Math.min(e,this.productItems.length-1),n=this.$refs[`nameInput-${t}`];n&&n[0]?n[0].focus():n&&n.focus()}))},focusQuantity(e){this.$nextTick(()=>{const t=this.$refs[`quantityInput-${e}`];t&&t[0]?t[0].focus():t&&t.focus()})},handleEnterOnQuantity(e,t){t.ctrlKey||t.metaKey?(t.preventDefault(),this.addProduct()):this.handleSearch()},handleTabOnName(e,t){t.shiftKey||(t.preventDefault(),this.focusQuantity(e))},handleTabOnQuantity(e,t){t.shiftKey?(t.preventDefault(),this.$nextTick(()=>{const t=this.$refs[`nameInput-${e}`];t&&t[0]?t[0].focus():t&&t.focus()})):(t.preventDefault(),e<this.productItems.length-1?this.$nextTick(()=>{const t=this.$refs[`nameInput-${e+1}`];t&&t[0]?t[0].focus():t&&t.focus()}):this.addProduct())},handleDeleteOnName(e,t){(t.ctrlKey||t.metaKey)&&(t.preventDefault(),this.productItems.length>1&&this.removeProduct(e))},handleBackspaceOnName(e,t){const n=t.target;""===n.value&&0===n.selectionStart&&0===n.selectionEnd?this.productItems.length>1&&(t.preventDefault(),this.removeProduct(e),e>0&&this.$nextTick(()=>{const t=this.$refs["quantityInput-"+(e-1)];t&&t[0]?t[0].focus():t&&t.focus()})):(t.ctrlKey||t.metaKey)&&(t.preventDefault(),this.productItems.length>1&&this.removeProduct(e))},handleDeleteOnQuantity(e,t){(t.ctrlKey||t.metaKey)&&(t.preventDefault(),this.productItems.length>1&&this.removeProduct(e))},handleBackspaceOnQuantity(e,t){const n=t.target;"1"===n.value||""===n.value&&0===n.selectionStart&&0===n.selectionEnd?this.productItems.length>1&&(t.preventDefault(),this.removeProduct(e),e>0&&this.$nextTick(()=>{const t=this.$refs["quantityInput-"+(e-1)];t&&t[0]?t[0].focus():t&&t.focus()})):(t.ctrlKey||t.metaKey)&&(t.preventDefault(),this.productItems.length>1&&this.removeProduct(e))},handleSearch(){if(this.isValid){const e=this.productItems.filter(e=>""!==e.name.trim()&&e.quantity>0).map(e=>({name:e.name.trim(),quantity:parseInt(e.quantity)}));this.$emit("search",e)}},handleGlobalShortcuts(e){const t=document.activeElement;(!t||"INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName)&&(e.ctrlKey||e.metaKey)&&"Enter"===e.key&&(e.preventDefault(),this.addProduct())}},mounted(){document.addEventListener("keydown",this.handleGlobalShortcuts),this.$nextTick(()=>{const e=this.$refs["nameInput-0"];e&&e[0]?e[0].focus():e&&e.focus()})},beforeUnmount(){document.removeEventListener("keydown",this.handleGlobalShortcuts)}},X=n(262);const j=(0,X.A)(P,[["render",h],["__scopeId","data-v-7f694bb1"]]);var T=j,_=n(33);const $={key:0,class:"result-display"},K={key:0,class:"error-message"},S={key:1},O={class:"result-header"},F={key:0,class:"target-products-list"},R={class:"target-items"},x={key:0},Q={key:1,class:"target-info"},A={class:"result-section"},M={key:0,class:"crops-list"},N=["onClick","title"],q={class:"crop-name"},U={class:"crop-count"},J={key:1,class:"no-data"},V={class:"result-section"},B={key:0,class:"products-list"},W=["onClick","title"],G={class:"product-name"},Z={class:"product-count"},z={key:1,class:"no-data"},H={class:"result-section"},Y={key:0,class:"buildings-list"},ee={class:"building-name"},te={class:"building-products"},ne={key:0},ie={key:1,class:"no-data"},ae={class:"modal-header"},oe={class:"modal-body"},re={key:0},ce={class:"modal-description"},ue={key:0,class:"related-products"},se={class:"product-building"},de={class:"product-name"},le={key:1,class:"no-related"},pe={key:1},me={class:"modal-description"},ge={key:0,class:"ingredients-list"},ye={class:"ingredient-type"},he={class:"ingredient-name"},be={class:"ingredient-count"},ke={key:1,class:"no-related"};function fe(e,t,n,o,r,c){const u=(0,a.g2)("RecipeChain");return n.result?((0,a.uX)(),(0,a.CE)("div",$,[n.result.error?((0,a.uX)(),(0,a.CE)("div",K,[(0,a.Lk)("p",null,(0,_.v_)(n.result.error),1)])):((0,a.uX)(),(0,a.CE)("div",S,[(0,a.Lk)("div",O,[t[4]||(t[4]=(0,a.Lk)("h2",null,"계산 결과",-1)),n.result.targetProducts&&n.result.targetProducts.length>0?((0,a.uX)(),(0,a.CE)("div",F,[t[3]||(t[3]=(0,a.Lk)("p",{class:"target-info-label"},"목표 가공품:",-1)),(0,a.Lk)("div",R,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.result.targetProducts,(e,t)=>((0,a.uX)(),(0,a.CE)("span",{key:t,class:"target-item"},[(0,a.Lk)("strong",null,(0,_.v_)(e.name),1),(0,a.eW)(" "+(0,_.v_)(e.quantity)+"개 ",1),t<n.result.targetProducts.length-1?((0,a.uX)(),(0,a.CE)("span",x,", ")):(0,a.Q3)("",!0)]))),128))])])):((0,a.uX)(),(0,a.CE)("p",Q,[(0,a.Lk)("strong",null,(0,_.v_)(n.result.targetProduct),1),(0,a.eW)(" "+(0,_.v_)(n.result.targetQuantity)+"개 생산 필요 ",1)]))]),(0,a.Lk)("div",A,[t[5]||(t[5]=(0,a.Lk)("h3",null,"필요한 작물",-1)),n.result.formattedCrops&&n.result.formattedCrops.length>0?((0,a.uX)(),(0,a.CE)("div",M,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.result.formattedCrops,e=>((0,a.uX)(),(0,a.CE)("div",{key:e.name,class:"crop-item clickable",onClick:t=>c.showCropDetails(e.name),title:"클릭하여 "+e.name+"이(가) 필요한 가공품 보기"},[(0,a.Lk)("span",q,(0,_.v_)(e.name),1),(0,a.Lk)("span",U,(0,_.v_)(e.count)+"개",1)],8,N))),128))])):((0,a.uX)(),(0,a.CE)("p",J,"필요한 작물이 없습니다."))]),(0,a.Lk)("div",V,[t[6]||(t[6]=(0,a.Lk)("h3",null,"필요한 가공품",-1)),n.result.formattedProducts&&n.result.formattedProducts.length>0?((0,a.uX)(),(0,a.CE)("div",B,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.result.formattedProducts,e=>((0,a.uX)(),(0,a.CE)("div",{key:e.name,class:"product-item clickable",onClick:t=>c.showProductDetails(e.name),title:"클릭하여 "+e.name+"의 재료 보기"},[(0,a.Lk)("span",G,(0,_.v_)(e.name),1),(0,a.Lk)("span",Z,(0,_.v_)(e.count)+"개",1)],8,W))),128))])):((0,a.uX)(),(0,a.CE)("p",z,"필요한 가공품이 없습니다."))]),(0,a.Lk)("div",H,[t[7]||(t[7]=(0,a.Lk)("h3",null,"건물별 가공품",-1)),n.result.formattedBuildings&&n.result.formattedBuildings.length>0?((0,a.uX)(),(0,a.CE)("div",Y,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.result.formattedBuildings,e=>((0,a.uX)(),(0,a.CE)("div",{key:e.building,class:"building-item"},[(0,a.Lk)("div",ee,(0,_.v_)(e.building),1),(0,a.Lk)("div",te,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.products,(t,n)=>((0,a.uX)(),(0,a.CE)("span",{key:t,class:"building-product-tag"},[(0,a.eW)((0,_.v_)(t),1),n<e.products.length-1?((0,a.uX)(),(0,a.CE)("span",ne,", ")):(0,a.Q3)("",!0)]))),128))])]))),128))])):((0,a.uX)(),(0,a.CE)("p",ie,"건물 정보가 없습니다."))]),(0,a.bF)(u,{dependencyChain:n.result.dependencyChain},null,8,["dependencyChain"])])),r.showModal?((0,a.uX)(),(0,a.CE)("div",{key:2,class:"modal-overlay",onClick:t[2]||(t[2]=(...e)=>c.closeModal&&c.closeModal(...e))},[(0,a.Lk)("div",{class:"modal-content",onClick:t[1]||(t[1]=(0,i.D$)(()=>{},["stop"]))},[(0,a.Lk)("div",ae,[(0,a.Lk)("h3",null,(0,_.v_)(r.modalTitle),1),(0,a.Lk)("button",{class:"modal-close",onClick:t[0]||(t[0]=(...e)=>c.closeModal&&c.closeModal(...e))},"×")]),(0,a.Lk)("div",oe,["crop"===r.modalType?((0,a.uX)(),(0,a.CE)("div",re,[(0,a.Lk)("p",ce,(0,_.v_)(r.selectedItem)+"이(가) 필요한 가공품:",1),r.relatedProducts.length>0?((0,a.uX)(),(0,a.CE)("div",ue,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.relatedProducts,e=>((0,a.uX)(),(0,a.CE)("div",{key:e.name,class:"related-product-item"},[(0,a.Lk)("span",se,(0,_.v_)(e.building),1),(0,a.Lk)("span",de,(0,_.v_)(e.name),1)]))),128))])):((0,a.uX)(),(0,a.CE)("p",le,"이 작물을 사용하는 가공품이 없습니다."))])):"product"===r.modalType?((0,a.uX)(),(0,a.CE)("div",pe,[(0,a.Lk)("p",me,(0,_.v_)(r.selectedItem)+"의 재료:",1),r.productIngredients?((0,a.uX)(),(0,a.CE)("div",ge,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.productIngredients.ingredients,(e,t)=>((0,a.uX)(),(0,a.CE)("div",{key:t,class:"ingredient-item"},[(0,a.Lk)("span",ye,(0,_.v_)("crop"===e.type?"작물":"가공품"),1),(0,a.Lk)("span",he,(0,_.v_)(e.name),1),(0,a.Lk)("span",be,(0,_.v_)(e.count)+"개",1)]))),128))])):((0,a.uX)(),(0,a.CE)("div",ke,"재료 정보를 찾을 수 없습니다."))])):(0,a.Q3)("",!0)])])])):(0,a.Q3)("",!0)])):(0,a.Q3)("",!0)}const ve={key:0,class:"recipe-chain"},Ce={class:"chain-container"},Le={class:"chain-product"},Ee={class:"product-box"},Ie={class:"product-name"},De={class:"product-building"},we={key:0,class:"chain-arrow"};function Pe(e,t,n,i,o,r){return n.dependencyChain&&n.dependencyChain.length>0?((0,a.uX)(),(0,a.CE)("div",ve,[t[0]||(t[0]=(0,a.Lk)("h3",null,"의존성 체인",-1)),(0,a.Lk)("div",Ce,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.dependencyChain,(e,t)=>((0,a.uX)(),(0,a.CE)("div",{key:e.id||e.name,class:"chain-item"},[(0,a.Lk)("div",Le,[(0,a.Lk)("div",Ee,[(0,a.Lk)("div",Ie,(0,_.v_)(e.name),1),(0,a.Lk)("div",De,(0,_.v_)(e.building),1)])]),t<n.dependencyChain.length-1?((0,a.uX)(),(0,a.CE)("div",we,"→")):(0,a.Q3)("",!0)]))),128))])])):(0,a.Q3)("",!0)}var Xe={name:"RecipeChain",props:{dependencyChain:{type:Array,default:()=>[]}}};const je=(0,X.A)(Xe,[["render",Pe],["__scopeId","data-v-99a79ff2"]]);var Te=je;function _e(e,t){return e.find(e=>e.name===t)||null}function $e(e,t,n=new Set){const i=_e(e,t);if(!i)return[];if(n.has(t))return[];n.add(t);const a=[];return i.ingredients.forEach(t=>{if("product"===t.type){const i=$e(e,t.name,new Set(n));a.push(...i),a.some(e=>e.name===t.name)||a.push(_e(e,t.name))}}),a.some(e=>e.name===t)||a.push(i),a}function Ke(e){const t={};return e.forEach(e=>{t[e.building]||(t[e.building]=[]),t[e.building].some(t=>t.name===e.name)||t[e.building].push(e)}),t}function Se(e,t,n=new Set){const i=[],a=e.filter(e=>e.ingredients.some(e=>"crop"===e.type&&e.name===t));a.forEach(e=>{n.has(e.name)||(n.add(e.name),i.push(e))});const o=(t,n)=>{const a=Oe(e,t,new Set(n));a.forEach(e=>{n.has(e.name)||(n.add(e.name),i.push(e),o(e.name,n))})};return a.forEach(e=>{o(e.name,new Set(n))}),i}function Oe(e,t,n=new Set){const i=[];return e.forEach(e=>{if(n.has(e.name))return;const a=e.ingredients.some(e=>"product"===e.type&&e.name===t);a&&(n.add(e.name),i.push(e))}),i}function Fe(e,t){return _e(e,t)}var Re={name:"ResultDisplay",components:{RecipeChain:Te},props:{result:{type:Object,default:null}},data(){return{showModal:!1,modalType:null,selectedItem:"",modalTitle:"",relatedProducts:[],productIngredients:null}},methods:{showCropDetails(e){const t=C(),n=this.result.dependencyChain||[],i=new Set(n.map(e=>e.name)),a=Se(t,e).filter(e=>i.has(e.name));this.modalType="crop",this.selectedItem=e,this.modalTitle=`${e}이(가) 필요한 가공품`,this.relatedProducts=a,this.showModal=!0},showProductDetails(e){const t=C(),n=Fe(t,e);this.modalType="product",this.selectedItem=e,this.modalTitle=`${e}의 재료`,this.productIngredients=n,this.showModal=!0},closeModal(){this.showModal=!1,this.modalType=null,this.selectedItem="",this.relatedProducts=[],this.productIngredients=null}}};const xe=(0,X.A)(Re,[["render",fe],["__scopeId","data-v-532b3278"]]);var Qe=xe;const Ae={class:"product-list"},Me={class:"list-header"},Ne={class:"header-actions"},qe={class:"search-box"},Ue={key:0,class:"form-section"},Je={class:"form-row"},Ve={class:"form-group"},Be=["disabled"],We={class:"form-group"},Ge={class:"form-group"},Ze={class:"form-group form-actions"},ze={class:"ingredients-section"},He={class:"ingredients-list"},Ye=["onUpdate:modelValue"],et=["onUpdate:modelValue"],tt=["onUpdate:modelValue"],nt=["onClick","disabled"],it={key:1,class:"empty-message"},at={key:2,class:"table-container"},ot={class:"products-table"},rt={class:"name-cell"},ct={class:"building-cell"},ut={class:"ingredients-cell"},st={class:"ingredients-display"},dt={class:"actions-cell"},lt={class:"action-buttons"},pt=["onClick","disabled","title"],mt=["onClick","disabled","title"],gt={class:"modal-actions"};function yt(e,t,n,o,r,c){return(0,a.uX)(),(0,a.CE)("div",Ae,[(0,a.Lk)("div",Me,[t[12]||(t[12]=(0,a.Lk)("h2",null,"가공품 목록",-1)),(0,a.Lk)("div",Ne,[(0,a.Lk)("div",qe,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>r.searchQuery=e),type:"text",placeholder:"가공품 이름, 건물, 재료로 검색...",class:"search-input"},null,512),[[i.Jo,r.searchQuery]])]),(0,a.Lk)("button",{onClick:t[1]||(t[1]=e=>r.showAddForm=!0),class:"add-btn"}," + 가공품 추가 ")])]),r.showAddForm||r.editingProduct?((0,a.uX)(),(0,a.CE)("div",Ue,[(0,a.Lk)("h3",null,(0,_.v_)(r.editingProduct?"가공품 수정":"가공품 추가"),1),(0,a.Lk)("div",Je,[(0,a.Lk)("div",Ve,[t[13]||(t[13]=(0,a.Lk)("label",null,"ID:",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>r.formData.id=e),type:"text",disabled:!!r.editingProduct,placeholder:"예: bread"},null,8,Be),[[i.Jo,r.formData.id]])]),(0,a.Lk)("div",We,[t[14]||(t[14]=(0,a.Lk)("label",null,"이름:",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>r.formData.name=e),type:"text",placeholder:"예: 빵"},null,512),[[i.Jo,r.formData.name]])]),(0,a.Lk)("div",Ge,[t[15]||(t[15]=(0,a.Lk)("label",null,"건물:",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>r.formData.building=e),type:"text",placeholder:"예: 제과소"},null,512),[[i.Jo,r.formData.building]])]),(0,a.Lk)("div",Ze,[(0,a.Lk)("button",{onClick:t[5]||(t[5]=(...e)=>c.saveProduct&&c.saveProduct(...e)),class:"save-btn"},"저장"),(0,a.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>c.cancelForm&&c.cancelForm(...e)),class:"cancel-btn"},"취소")])]),(0,a.Lk)("div",ze,[t[17]||(t[17]=(0,a.Lk)("label",null,"재료:",-1)),(0,a.Lk)("div",He,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.formData.ingredients,(e,n)=>((0,a.uX)(),(0,a.CE)("div",{key:n,class:"ingredient-row"},[(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":t=>e.type=t,class:"ing-type"},[...t[16]||(t[16]=[(0,a.Lk)("option",{value:"crop"},"작물",-1),(0,a.Lk)("option",{value:"product"},"가공품",-1)])],8,Ye),[[i.u1,e.type]]),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t=>e.name=t,type:"text",placeholder:"이름",class:"ing-name"},null,8,et),[[i.Jo,e.name]]),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t=>e.count=t,type:"number",min:"1",placeholder:"개수",class:"ing-count"},null,8,tt),[[i.Jo,e.count,void 0,{number:!0}]]),(0,a.Lk)("button",{onClick:e=>c.removeIngredient(n),class:"remove-ing-btn",disabled:1===r.formData.ingredients.length}," 삭제 ",8,nt)]))),128)),(0,a.Lk)("button",{onClick:t[7]||(t[7]=(...e)=>c.addIngredient&&c.addIngredient(...e)),class:"add-ing-btn"},"+ 재료 추가")])])])):(0,a.Q3)("",!0),0===c.filteredProducts.length?((0,a.uX)(),(0,a.CE)("div",it,(0,_.v_)(r.searchQuery?"검색 결과가 없습니다.":"가공품이 없습니다."),1)):((0,a.uX)(),(0,a.CE)("div",at,[(0,a.Lk)("table",ot,[t[18]||(t[18]=(0,a.Lk)("thead",null,[(0,a.Lk)("tr",null,[(0,a.Lk)("th",null,"이름"),(0,a.Lk)("th",null,"건물"),(0,a.Lk)("th",null,"재료"),(0,a.Lk)("th",null,"작업")])],-1)),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(c.filteredProducts,e=>((0,a.uX)(),(0,a.CE)("tr",{key:e.id,class:(0,_.C4)({"custom-product":e.isCustom})},[(0,a.Lk)("td",rt,(0,_.v_)(e.name),1),(0,a.Lk)("td",ct,(0,_.v_)(e.building),1),(0,a.Lk)("td",ut,[(0,a.Lk)("div",st,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.ingredients,(e,t)=>((0,a.uX)(),(0,a.CE)("span",{key:t,class:(0,_.C4)(["ingredient-tag",e.type])},(0,_.v_)(e.name)+" × "+(0,_.v_)(e.count),3))),128))])]),(0,a.Lk)("td",dt,[(0,a.Lk)("div",lt,[(0,a.Lk)("button",{onClick:t=>c.startEdit(e),class:"edit-btn",disabled:!e.isCustom,title:e.isCustom?"수정":"기본 가공품은 수정할 수 없습니다"}," 수정 ",8,pt),(0,a.Lk)("button",{onClick:t=>c.confirmDelete(e),class:"delete-btn",disabled:!e.isCustom,title:e.isCustom?"삭제":"기본 가공품은 삭제할 수 없습니다"}," 삭제 ",8,mt)])])],2))),128))])])])),r.productToDelete?((0,a.uX)(),(0,a.CE)("div",{key:3,class:"modal-overlay",onClick:t[11]||(t[11]=(...e)=>c.cancelDelete&&c.cancelDelete(...e))},[(0,a.Lk)("div",{class:"modal-content",onClick:t[10]||(t[10]=(0,i.D$)(()=>{},["stop"]))},[t[19]||(t[19]=(0,a.Lk)("h3",null,"가공품 삭제",-1)),(0,a.Lk)("p",null,'정말로 "'+(0,_.v_)(r.productToDelete.name)+'"을(를) 삭제하시겠습니까?',1),(0,a.Lk)("div",gt,[(0,a.Lk)("button",{onClick:t[8]||(t[8]=(...e)=>c.executeDelete&&c.executeDelete(...e)),class:"confirm-btn"},"삭제"),(0,a.Lk)("button",{onClick:t[9]||(t[9]=(...e)=>c.cancelDelete&&c.cancelDelete(...e)),class:"cancel-btn"},"취소")])])])):(0,a.Q3)("",!0)])}var ht={name:"ProductList",emits:["edit-product","product-deleted"],data(){return{searchQuery:"",productToDelete:null,showAddForm:!1,editingProduct:null,formData:{id:"",name:"",building:"",ingredients:[{type:"crop",name:"",count:1}]}}},computed:{allProducts(){return C().sort((e,t)=>e.name.localeCompare(t.name))},filteredProducts(){if(!this.searchQuery.trim())return this.allProducts;const e=this.searchQuery.toLowerCase().trim();return this.allProducts.filter(t=>!!t.name.toLowerCase().includes(e)||(!!t.building.toLowerCase().includes(e)||!!t.ingredients.some(t=>t.name.toLowerCase().includes(e))))}},methods:{startEdit(e){e.isCustom&&(this.editingProduct=e,this.showAddForm=!0,this.formData={id:e.id,name:e.name,building:e.building,ingredients:e.ingredients.map(e=>({type:e.type,name:e.name,count:e.count}))})},cancelForm(){this.showAddForm=!1,this.editingProduct=null,this.formData={id:"",name:"",building:"",ingredients:[{type:"crop",name:"",count:1}]}},addIngredient(){this.formData.ingredients.push({type:"crop",name:"",count:1})},removeIngredient(e){this.formData.ingredients.length>1&&this.formData.ingredients.splice(e,1)},saveProduct(){if(!this.formData.id.trim()||!this.formData.name.trim()||!this.formData.building.trim())return void alert("ID, 이름, 건물을 모두 입력해주세요.");if(this.formData.ingredients.some(e=>!e.name.trim()||e.count<1))return void alert("재료 정보를 올바르게 입력해주세요.");const e={id:this.formData.id.trim(),name:this.formData.name.trim(),building:this.formData.building.trim(),ingredients:this.formData.ingredients.map(e=>({type:e.type,name:e.name.trim(),count:parseInt(e.count)}))};let t;t=this.editingProduct?E(this.editingProduct.id,e):L(e),t.success?(this.$emit("product-deleted"),this.cancelForm()):alert(t.error||"저장에 실패했습니다.")},editProduct(e){this.$emit("edit-product",e)},confirmDelete(e){e.isCustom&&(this.productToDelete=e)},cancelDelete(){this.productToDelete=null},executeDelete(){if(this.productToDelete){const e=I(this.productToDelete.id);e.success?(this.$emit("product-deleted"),this.productToDelete=null):alert(e.error)}}}};const bt=(0,X.A)(ht,[["render",yt],["__scopeId","data-v-07af68c7"]]);var kt=bt;const ft={class:"navigation"},vt={class:"nav-list"},Ct=["onClick","title"],Lt={class:"shortcut-hint"};function Et(e,t,n,i,o,r){return(0,a.uX)(),(0,a.CE)("nav",ft,[(0,a.Lk)("ul",vt,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(o.menuItems,(e,t)=>((0,a.uX)(),(0,a.CE)("li",{key:e.id,class:(0,_.C4)([{active:n.currentTab===e.id},"nav-item"]),onClick:t=>r.switchTab(e.id),title:`${e.label} (${t+1}번 키 또는 Ctrl+${t+1})`},[(0,a.eW)((0,_.v_)(e.label)+" ",1),(0,a.Lk)("span",Lt,"("+(0,_.v_)(t+1)+")",1)],10,Ct))),128))])])}var It={name:"Navigation",props:{currentTab:{type:String,required:!0}},emits:["tab-change"],data(){return{menuItems:[{id:"search",label:"검색"},{id:"list",label:"가공품 목록"},{id:"data",label:"데이터 관리"}]}},methods:{switchTab(e){this.$emit("tab-change",e)}}};const Dt=(0,X.A)(It,[["render",Et],["__scopeId","data-v-e6fa5c8e"]]);var wt=Dt;const Pt={class:"data-management"},Xt={class:"actions"},jt={class:"action-group"},Tt={class:"action-group"},_t={class:"action-group"},$t={class:"modal-actions"};function Kt(e,t,n,o,r,c){return(0,a.uX)(),(0,a.CE)("div",Pt,[t[17]||(t[17]=(0,a.Lk)("h2",null,"데이터 관리",-1)),t[18]||(t[18]=(0,a.Lk)("div",{class:"info-box"},[(0,a.Lk)("p",null,"가공품 데이터는 브라우저의 localStorage에 자동으로 저장됩니다."),(0,a.Lk)("p",null,"백업을 위해 JSON 파일로 내보내거나, 다른 기기에서 가져올 수 있습니다.")],-1)),(0,a.Lk)("div",Xt,[(0,a.Lk)("div",jt,[t[8]||(t[8]=(0,a.Lk)("h3",null,"내보내기",-1)),t[9]||(t[9]=(0,a.Lk)("p",null,"현재 저장된 가공품 데이터를 JSON 파일로 다운로드합니다.",-1)),(0,a.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>c.handleExport&&c.handleExport(...e)),class:"export-btn"},"데이터 내보내기")]),(0,a.Lk)("div",Tt,[t[10]||(t[10]=(0,a.Lk)("h3",null,"가져오기",-1)),t[11]||(t[11]=(0,a.Lk)("p",null,"JSON 파일에서 가공품 데이터를 불러옵니다. (기존 데이터와 병합됩니다)",-1)),(0,a.Lk)("input",{ref:"fileInput",type:"file",accept:".json",onChange:t[1]||(t[1]=(...e)=>c.handleImport&&c.handleImport(...e)),style:{display:"none"}},null,544),(0,a.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>c.triggerFileInput&&c.triggerFileInput(...e)),class:"import-btn"},"데이터 가져오기")]),(0,a.Lk)("div",_t,[t[12]||(t[12]=(0,a.Lk)("h3",null,"초기화",-1)),t[13]||(t[13]=(0,a.Lk)("p",null,"모든 사용자 추가 가공품 데이터를 삭제합니다. (기본 데이터는 유지됩니다)",-1)),(0,a.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>c.confirmReset&&c.confirmReset(...e)),class:"reset-btn"},"데이터 초기화")])]),r.message?((0,a.uX)(),(0,a.CE)("div",{key:0,class:(0,_.C4)(["message",r.messageType])},(0,_.v_)(r.message),3)):(0,a.Q3)("",!0),r.showResetConfirm?((0,a.uX)(),(0,a.CE)("div",{key:1,class:"modal-overlay",onClick:t[7]||(t[7]=(...e)=>c.cancelReset&&c.cancelReset(...e))},[(0,a.Lk)("div",{class:"modal-content",onClick:t[6]||(t[6]=(0,i.D$)(()=>{},["stop"]))},[t[14]||(t[14]=(0,a.Lk)("h3",null,"데이터 초기화",-1)),t[15]||(t[15]=(0,a.Lk)("p",null,"정말로 모든 사용자 추가 가공품 데이터를 삭제하시겠습니까?",-1)),t[16]||(t[16]=(0,a.Lk)("p",{class:"warning"},"이 작업은 되돌릴 수 없습니다!",-1)),(0,a.Lk)("div",$t,[(0,a.Lk)("button",{onClick:t[4]||(t[4]=(...e)=>c.executeReset&&c.executeReset(...e)),class:"confirm-btn"},"초기화"),(0,a.Lk)("button",{onClick:t[5]||(t[5]=(...e)=>c.cancelReset&&c.cancelReset(...e)),class:"cancel-btn"},"취소")])])])):(0,a.Q3)("",!0)])}var St={name:"DataManagement",emits:["data-changed"],data(){return{message:null,messageType:"info",showResetConfirm:!1}},methods:{handleExport(){const e=D();e.success?this.showMessage("데이터가 성공적으로 내보내졌습니다.","success"):this.showMessage(e.error||"내보내기에 실패했습니다.","error")},triggerFileInput(){this.$refs.fileInput.click()},async handleImport(e){const t=e.target.files[0];if(!t)return;if(!t.name.endsWith(".json"))return void this.showMessage("JSON 파일만 업로드할 수 있습니다.","error");const n=await w(t);n.success?(this.showMessage(`데이터 가져오기 완료! ${n.imported}개 항목을 가져왔습니다. (총 ${n.total}개)`,"success"),this.$emit("data-changed"),e.target.value=""):(this.showMessage(n.error||"가져오기에 실패했습니다.","error"),e.target.value="")},confirmReset(){this.showResetConfirm=!0},cancelReset(){this.showResetConfirm=!1},executeReset(){const e=v([]);e?(this.showMessage("데이터가 초기화되었습니다.","success"),this.$emit("data-changed"),this.showResetConfirm=!1):this.showMessage("초기화에 실패했습니다.","error")},showMessage(e,t="info"){this.message=e,this.messageType=t,setTimeout(()=>{this.message=null},5e3)}}};const Ot=(0,X.A)(St,[["render",Kt],["__scopeId","data-v-3f0de35d"]]);var Ft=Ot;function Rt(e,t){return xt([{name:e,quantity:t}])}function xt(e){const t=C(),n=[],i=[],a=[];if(e.forEach(({name:e,quantity:o})=>{const r=_e(t,e);if(!r)return void n.push(`가공품 "${e}"을(를) 찾을 수 없습니다.`);a.push({name:e,quantity:o,product:r});const c=$e(t,e);i.push(...c)}),n.length>0)return{error:n.join("\n"),crops:{},intermediateProducts:{},buildingGroups:{},targetProducts:[]};const o=[],r=new Set;i.forEach(e=>{r.has(e.name)||(r.add(e.name),o.push(e))});const c={},u={},s=Ke(o);function d(e,n){e&&e.ingredients.forEach(e=>{if("crop"===e.type){const t=e.name;c[t]=(c[t]||0)+e.count*n}else if("product"===e.type){const i=_e(t,e.name);if(i){const t=e.count*n;u[e.name]=(u[e.name]||0)+t,d(i,t)}}})}return a.forEach(({product:e,quantity:t})=>{d(e,t),u[e.name]=(u[e.name]||0)+t}),{targetProducts:a.map(({name:e,quantity:t})=>({name:e,quantity:t})),crops:c,intermediateProducts:u,buildingGroups:s,dependencyChain:o}}function Qt(e){if(e.error)return e;const t=Object.entries(e.crops).map(([e,t])=>({name:e,count:Math.ceil(t)})),n=Object.entries(e.intermediateProducts).map(([e,t])=>({name:e,count:Math.ceil(t)})).sort((t,n)=>{const i=e.dependencyChain.findIndex(e=>e.name===t.name),a=e.dependencyChain.findIndex(e=>e.name===n.name);return(-1===i?999:i)-(-1===a?999:a)}),i=Object.entries(e.buildingGroups).map(([e,t])=>({building:e,products:t.map(e=>e.name)}));return{...e,formattedCrops:t,formattedProducts:n,formattedBuildings:i}}var At={name:"App",components:{SearchForm:T,ResultDisplay:Qe,ProductList:kt,Navigation:wt,DataManagement:Ft},data(){return{currentTab:"search",result:null}},methods:{switchTab(e){this.currentTab=e},handleKeyboardShortcuts(e){const t=document.activeElement,n=t&&("INPUT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable);if((e.ctrlKey||e.metaKey)&&e.key>="1"&&e.key<="3"){e.preventDefault();const t=parseInt(e.key)-1,n=["search","list","data"];return void(n[t]&&this.switchTab(n[t]))}if(!n&&e.key>="1"&&e.key<="3"&&!e.ctrlKey&&!e.metaKey&&!e.altKey&&!e.shiftKey){e.preventDefault();const t=parseInt(e.key)-1,n=["search","list","data"];n[t]&&this.switchTab(n[t])}},handleSearch(e){if(Array.isArray(e)){const t=xt(e);this.result=Qt(t)}else{const{productName:t,quantity:n}=e,i=Rt(t,n);this.result=Qt(i)}},handleProductAdded(){if(this.result)if(this.result.targetProducts&&this.result.targetProducts.length>0){const e=xt(this.result.targetProducts);this.result=Qt(e)}else if(this.result.targetProduct){const e=Rt(this.result.targetProduct,this.result.targetQuantity);this.result=Qt(e)}},handleProductDeleted(){this.handleProductAdded()},handleDataChanged(){this.handleProductAdded()}},mounted(){document.addEventListener("keydown",this.handleKeyboardShortcuts)},beforeUnmount(){document.removeEventListener("keydown",this.handleKeyboardShortcuts)}};const Mt=(0,X.A)(At,[["render",s]]);var Nt=Mt;(0,i.Ef)(Nt).mount("#app")}},t={};function n(i){var a=t[i];if(void 0!==a)return a.exports;var o=t[i]={exports:{}};return e[i](o,o.exports,n),o.exports}n.m=e,function(){var e=[];n.O=function(t,i,a,o){if(!i){var r=1/0;for(d=0;d<e.length;d++){i=e[d][0],a=e[d][1],o=e[d][2];for(var c=!0,u=0;u<i.length;u++)(!1&o||r>=o)&&Object.keys(n.O).every(function(e){return n.O[e](i[u])})?i.splice(u--,1):(c=!1,o<r&&(r=o));if(c){e.splice(d--,1);var s=a();void 0!==s&&(t=s)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[i,a,o]}}(),function(){n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={524:0};n.O.j=function(t){return 0===e[t]};var t=function(t,i){var a,o,r=i[0],c=i[1],u=i[2],s=0;if(r.some(function(t){return 0!==e[t]})){for(a in c)n.o(c,a)&&(n.m[a]=c[a]);if(u)var d=u(n)}for(t&&t(i);s<r.length;s++)o=r[s],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(d)},i=self["webpackChunkrealfarm_helper"]=self["webpackChunkrealfarm_helper"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=n.O(void 0,[504],function(){return n(766)});i=n.O(i)})();
//# sourceMappingURL=app.ffb8ac81.js.map