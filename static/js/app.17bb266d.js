(function(){"use strict";var e={347:function(e,t,n){var i=n(751),a=n(641);const o={id:"app"},s={key:0,class:"tab-content"},r={key:1,class:"tab-content"},c={key:2,class:"tab-content"},l={key:3,class:"tab-content"},u={key:4,class:"tab-content"};function d(e,t,n,i,d,m){const p=(0,a.g2)("Navigation"),h=(0,a.g2)("SearchForm"),f=(0,a.g2)("ResultDisplay"),g=(0,a.g2)("ProductList"),y=(0,a.g2)("CropList"),b=(0,a.g2)("ItemList"),k=(0,a.g2)("DataManagement");return(0,a.uX)(),(0,a.CE)("div",o,[t[0]||(t[0]=(0,a.Lk)("header",null,[(0,a.Lk)("h1",null,"레알팜 게임 핼퍼")],-1)),(0,a.Lk)("main",null,[(0,a.bF)(p,{currentTab:d.currentTab,onTabChange:m.switchTab},null,8,["currentTab","onTabChange"]),"search"===d.currentTab?((0,a.uX)(),(0,a.CE)("div",s,[(0,a.bF)(h,{onSearch:m.handleSearch},null,8,["onSearch"]),d.result?((0,a.uX)(),(0,a.Wv)(f,{key:0,result:d.result},null,8,["result"])):(0,a.Q3)("",!0)])):(0,a.Q3)("",!0),"list"===d.currentTab?((0,a.uX)(),(0,a.CE)("div",r,[(0,a.bF)(g,{onProductDeleted:m.handleProductDeleted},null,8,["onProductDeleted"])])):(0,a.Q3)("",!0),"crops"===d.currentTab?((0,a.uX)(),(0,a.CE)("div",c,[(0,a.bF)(y,{onDataChanged:m.handleDataChanged},null,8,["onDataChanged"])])):(0,a.Q3)("",!0),"items"===d.currentTab?((0,a.uX)(),(0,a.CE)("div",l,[(0,a.bF)(b,{onDataChanged:m.handleDataChanged},null,8,["onDataChanged"])])):(0,a.Q3)("",!0),"data"===d.currentTab?((0,a.uX)(),(0,a.CE)("div",u,[(0,a.bF)(k,{onDataChanged:m.handleDataChanged},null,8,["onDataChanged"])])):(0,a.Q3)("",!0)])])}var m=n(33);const p={class:"search-form"},h={class:"products-list"},f={class:"autocomplete-wrapper"},g=["onUpdate:modelValue","placeholder","onInput","onKeydown","onCompositionstart","onCompositionend","onFocus","onBlur"],y=["onMousedown","onMouseenter"],b=["onUpdate:modelValue","onFocus","onInput","onKeyup","onKeydown"],k=["onClick","disabled","title"],v=["disabled"];function C(e,t,n,o,s,r){return(0,a.uX)(),(0,a.CE)("div",p,[t[4]||(t[4]=(0,a.Lk)("h2",null,"가공품 검색",-1)),(0,a.Lk)("div",h,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(s.productItems,(e,t)=>((0,a.uX)(),(0,a.CE)("div",{key:e.id,class:"product-item-row"},[(0,a.Lk)("div",f,[(0,a.bo)(((0,a.uX)(),(0,a.CE)("input",{key:`name-${e.id}`,"onUpdate:modelValue":t=>e.name=t,type:"text",placeholder:`가공품 이름 ${t+1}`,class:"product-name-input",ref_for:!0,ref:t=>{t&&(s.nameInputRefs[e.id]=t)},lang:"ko",autocomplete:"off",inputmode:"text",onInput:e=>r.handleInput(t,e),onKeydown:[(0,i.jR)(e=>r.handleEnterOnName(t,e),["enter"]),(0,i.jR)(e=>r.handleDeleteOnName(t,e),["delete"]),(0,i.jR)(e=>r.handleBackspaceOnName(t,e),["backspace"]),(0,i.jR)((0,i.D$)(e=>r.handleArrowDown(t,e),["prevent"]),["down"]),(0,i.jR)((0,i.D$)(e=>r.handleArrowUp(t,e),["prevent"]),["up"]),(0,i.jR)(e=>r.handleArrowRightOnName(t,e),["right"])],onCompositionstart:e=>r.handleCompositionStart(t),onCompositionend:e=>r.handleCompositionEnd(t,e),onFocus:e=>r.handleFocus(t,e),onBlur:e=>r.handleBlur(t)},null,40,g)),[[i.Jo,e.name]]),s.autocompleteVisible[t]&&s.autocompleteItems[t].length>0?((0,a.uX)(),(0,a.CE)("div",{key:0,class:"autocomplete-dropdown",ref_for:!0,ref:`autocomplete-${t}`},[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(s.autocompleteItems[t],(e,n)=>((0,a.uX)(),(0,a.CE)("div",{key:n,class:(0,m.C4)(["autocomplete-item",{selected:n===s.selectedIndex[t]}]),onMousedown:(0,i.D$)(n=>r.selectSuggestion(t,e),["prevent"]),onMouseenter:e=>s.selectedIndex[t]=n},(0,m.v_)(e),43,y))),128))],512)):(0,a.Q3)("",!0)]),(0,a.bo)(((0,a.uX)(),(0,a.CE)("input",{key:`quantity-${e.id}`,"onUpdate:modelValue":t=>e.quantity=t,type:"number",min:"1",placeholder:"개수",class:"quantity-input",ref_for:!0,ref:t=>{t&&(s.quantityInputRefs[e.id]=t)},onFocus:e=>r.handleFocusQuantity(t,e),onInput:e=>r.handleQuantityInput(t,e),onKeyup:(0,i.jR)(e=>r.handleEnterOnQuantity(t,e),["enter"]),onKeydown:[(0,i.jR)((0,i.D$)(e=>r.handleArrowDownQuantity(t,e),["prevent"]),["down"]),(0,i.jR)((0,i.D$)(e=>r.handleArrowUpQuantity(t,e),["prevent"]),["up"]),(0,i.jR)(e=>r.handleDeleteOnQuantity(t,e),["delete"]),(0,i.jR)(e=>r.handleBackspaceOnQuantity(t,e),["backspace"]),(0,i.jR)(e=>r.handleArrowLeftOnQuantity(t,e),["left"])]},null,40,b)),[[i.Jo,e.quantity,void 0,{number:!0}]]),(0,a.Lk)("button",{onClick:e=>r.removeProduct(t),class:"remove-btn",disabled:1===s.productItems.length,type:"button",title:1===s.productItems.length?"최소 1개는 유지해야 합니다":"삭제 (Ctrl+Delete 또는 빈 필드에서 Backspace)"}," 삭제 ",8,k)]))),128)),(0,a.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>r.addProduct&&r.addProduct(...e)),class:"add-product-btn",type:"button"},[...t[2]||(t[2]=[(0,a.eW)(" + 가공품 추가 ",-1),(0,a.Lk)("span",{class:"shortcut-hint"},"(Ctrl+Enter 또는 개수 입력 후 Tab)",-1)])])]),(0,a.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>r.handleSearch&&r.handleSearch(...e)),disabled:!r.isValid,class:"search-btn",ref:"searchButton"},[...t[3]||(t[3]=[(0,a.eW)(" 검색 ",-1),(0,a.Lk)("span",{class:"shortcut-hint"},"(Enter)",-1)])],8,v)])}var I=JSON.parse('{"Z":[{"id":"hyeonmi","name":"현미","building":"정미소","ingredients":[{"type":"crop","name":"벼","count":30}]},{"id":"baekmi","name":"백미","building":"정미소","ingredients":[{"type":"product","name":"현미","count":1}]},{"id":"chapssal","name":"찹쌀","building":"정미소","ingredients":[{"type":"crop","name":"찰벼","count":30}]},{"id":"heukmi","name":"흑미","building":"정미소","ingredients":[{"type":"crop","name":"흑미벼","count":30}]},{"id":"yeotgireum","name":"엿기름","building":"정미소","ingredients":[{"type":"crop","name":"보리","count":30}]},{"id":"baeami","name":"배아미","building":"정미소","ingredients":[{"type":"crop","name":"벼","count":40}]},{"id":"balahyeonmi","name":"발아현미","building":"정미소","ingredients":[{"type":"product","name":"현미","count":1}]},{"id":"wanggyeo","name":"왕겨","building":"정미소","ingredients":[{"type":"crop","name":"벼","count":50}]},{"id":"byeotjip","name":"볏짚","building":"정미소","ingredients":[{"type":"crop","name":"벼","count":50}]},{"id":"chamgireum","name":"참기름","building":"기름집","ingredients":[{"type":"crop","name":"참깨","count":30}]},{"id":"sikyongyu","name":"식용유","building":"기름집","ingredients":[{"type":"crop","name":"대두","count":30}]},{"id":"deulgireum","name":"들기름","building":"기름집","ingredients":[{"type":"crop","name":"들깨","count":30}]},{"id":"seoltang","name":"설탕","building":"제당소","ingredients":[{"type":"crop","name":"사탕수수","count":30}]},{"id":"mullyeot","name":"물엿","building":"제당소","ingredients":[{"type":"product","name":"엿기름","count":1}]},{"id":"gochutgaru","name":"고춧가루","building":"방앗간","ingredients":[{"type":"crop","name":"고추","count":30}]},{"id":"milgaru","name":"밀가루","building":"방앗간","ingredients":[{"type":"crop","name":"밀","count":30}]},{"id":"ssalgaru","name":"쌀가루","building":"방앗간","ingredients":[{"type":"product","name":"백미","count":1}]},{"id":"chapssalgaru","name":"찹쌀가루","building":"방앗간","ingredients":[{"type":"product","name":"찹쌀","count":1}]},{"id":"jeonbun","name":"전분","building":"방앗간","ingredients":[{"type":"crop","name":"옥수수","count":30}]},{"id":"konggaru","name":"콩가루","building":"방앗간","ingredients":[{"type":"crop","name":"대두","count":30}]},{"id":"memilgaru","name":"메밀가루","building":"방앗간","ingredients":[{"type":"crop","name":"메밀","count":30}]},{"id":"dubu","name":"두부","building":"두부집","ingredients":[{"type":"crop","name":"대두","count":20},{"type":"crop","name":"응고제","count":5}]},{"id":"yeondubu","name":"연두부","building":"두부집","ingredients":[{"type":"crop","name":"대두","count":30},{"type":"crop","name":"응고제","count":4}]},{"id":"sundubu","name":"순두부","building":"두부집","ingredients":[{"type":"crop","name":"대두","count":40},{"type":"crop","name":"응고제","count":3}]},{"id":"yubu","name":"유부","building":"두부집","ingredients":[{"type":"product","name":"두부","count":1},{"type":"product","name":"식용유","count":1}]},{"id":"memilmuk","name":"메밀묵","building":"두부집","ingredients":[{"type":"product","name":"메밀가루","count":1},{"type":"product","name":"참기름","count":1},{"type":"item","name":"소금","count":5}]},{"id":"garaetteok","name":"가래떡","building":"떡집","ingredients":[{"type":"product","name":"찹쌀가루","count":1},{"type":"item","name":"소금","count":5}]},{"id":"sirutteok","name":"시루떡","building":"떡집","ingredients":[{"type":"product","name":"찹쌀가루","count":1},{"type":"crop","name":"팥","count":30},{"type":"item","name":"소금","count":5}]},{"id":"songpyeon","name":"송편","building":"떡집","ingredients":[{"type":"product","name":"찹쌀가루","count":1},{"type":"crop","name":"참깨","count":30},{"type":"product","name":"설탕","count":1}]},{"id":"baekseolgi","name":"백설기","building":"떡집","ingredients":[{"type":"product","name":"찹쌀가루","count":1},{"type":"product","name":"설탕","count":1},{"type":"item","name":"소금","count":5}]},{"id":"ssukgaetteok","name":"쑥개떡","building":"떡집","ingredients":[{"type":"product","name":"찹쌀가루","count":1},{"type":"crop","name":"개똥쑥","count":30},{"type":"product","name":"참기름","count":1},{"type":"item","name":"소금","count":5}]},{"id":"iljeolmi","name":"일절미","building":"떡집","ingredients":[{"type":"product","name":"찹쌀가루","count":1},{"type":"product","name":"콩가루","count":1},{"type":"product","name":"설탕","count":1},{"type":"item","name":"소금","count":5}]},{"id":"ssukpattteok","name":"쑥팥떡","building":"떡집","ingredients":[{"type":"product","name":"쑥개떡","count":1},{"type":"crop","name":"팥","count":30}]},{"id":"hobakgoji","name":"호박고지","building":"건조장","ingredients":[{"type":"crop","name":"천둥호박","count":30}]},{"id":"gogumamallaengi","name":"고구마말랭이","building":"건조장","ingredients":[{"type":"crop","name":"고구마","count":30}]},{"id":"mumallaengi","name":"무말랭이","building":"건조장","ingredients":[{"type":"crop","name":"무","count":30}]},{"id":"geontomato","name":"건토마토","building":"건조장","ingredients":[{"type":"crop","name":"토마토","count":30}]},{"id":"mallinpineapple","name":"말린파인애플","building":"건조장","ingredients":[{"type":"crop","name":"파인애플","count":30}]},{"id":"geonpodo","name":"건포도","building":"건조장","ingredients":[{"type":"crop","name":"포도","count":30}]},{"id":"geonjomango","name":"건조망고","building":"건조장","ingredients":[{"type":"crop","name":"애플망고","count":30}]},{"id":"nurungji","name":"누룽지","building":"건조장","ingredients":[{"type":"product","name":"백미","count":1}]},{"id":"hobakjeup","name":"호박즙","building":"즙제조장","ingredients":[{"type":"crop","name":"천둥호박","count":30}]},{"id":"gaettongssukjeup","name":"개똥쑥즙","building":"즙제조장","ingredients":[{"type":"crop","name":"개똥쑥","count":30}]},{"id":"yangbaechujeup","name":"양배추즙","building":"즙제조장","ingredients":[{"type":"crop","name":"양배추","count":30},{"type":"crop","name":"당근","count":30}]},{"id":"baedorajijeup","name":"배도라지즙","building":"즙제조장","ingredients":[{"type":"crop","name":"배","count":30},{"type":"crop","name":"도라지","count":30}]},{"id":"geongangjeup","name":"건강즙","building":"즙제조장","ingredients":[{"type":"crop","name":"여주","count":30},{"type":"crop","name":"삼채","count":30}]},{"id":"yachaejeup","name":"야채즙","building":"즙제조장","ingredients":[{"type":"product","name":"양배추즙","count":1},{"type":"crop","name":"브로콜리","count":30},{"type":"crop","name":"콜라비","count":30}]},{"id":"beoseotjeup","name":"버섯즙","building":"즙제조장","ingredients":[{"type":"crop","name":"가시오가피","count":30},{"type":"crop","name":"상황버섯","count":30},{"type":"crop","name":"차가버섯","count":30},{"type":"crop","name":"노루궁뎅이버섯","count":30}]},{"id":"sikcho","name":"식초","building":"소스제조장","ingredients":[{"type":"crop","name":"사과","count":30},{"type":"product","name":"설탕","count":1},{"type":"item","name":"이스트","count":5}]},{"id":"mayonnaise","name":"마요네즈","building":"소스제조장","ingredients":[{"type":"product","name":"식초","count":1},{"type":"crop","name":"달걀","count":5},{"type":"item","name":"소금","count":5}]},{"id":"gyeojasauce","name":"겨자소스","building":"소스제조장","ingredients":[{"type":"crop","name":"겨자","count":30},{"type":"product","name":"설탕","count":1},{"type":"product","name":"전분","count":1},{"type":"product","name":"식초","count":1}]},{"id":"ketchup","name":"케첩","building":"소스제조장","ingredients":[{"type":"crop","name":"토마토","count":30},{"type":"crop","name":"양파","count":30},{"type":"product","name":"설탕","count":1},{"type":"product","name":"식초","count":1}]},{"id":"baechukimchi","name":"배추김치","building":"김치전문점","ingredients":[{"type":"crop","name":"배추","count":30},{"type":"product","name":"고춧가루","count":1},{"type":"item","name":"소금","count":5}]},{"id":"dongchimi","name":"동치미","building":"김치전문점","ingredients":[{"type":"crop","name":"무","count":30},{"type":"crop","name":"배","count":30},{"type":"crop","name":"생강","count":30},{"type":"item","name":"소금","count":5}]},{"id":"kkakdugi","name":"깍두기","building":"김치전문점","ingredients":[{"type":"crop","name":"무","count":30},{"type":"crop","name":"미나리","count":30},{"type":"product","name":"고춧가루","count":1},{"type":"item","name":"소금","count":5}]},{"id":"oisobagi","name":"오이소박이","building":"김치전문점","ingredients":[{"type":"crop","name":"오이","count":30},{"type":"crop","name":"양파","count":30},{"type":"product","name":"고춧가루","count":1},{"type":"item","name":"소금","count":5}]},{"id":"pakimchi","name":"파김치","building":"김치전문점","ingredients":[{"type":"crop","name":"파","count":30},{"type":"product","name":"고춧가루","count":1},{"type":"product","name":"설탕","count":1},{"type":"item","name":"소금","count":5}]},{"id":"mumallaengimuchim","name":"무말랭이무침","building":"김치전문점","ingredients":[{"type":"product","name":"무말랭이","count":1},{"type":"product","name":"고춧가루","count":1},{"type":"product","name":"간장","count":1},{"type":"product","name":"참기름","count":1}]},{"id":"hanji","name":"한지","building":"인쇄소","ingredients":[{"type":"crop","name":"닥나무","count":30}]},{"id":"mosi","name":"모시","building":"방직소","ingredients":[{"type":"crop","name":"모시풀","count":30}]},{"id":"som","name":"솜","building":"방직소","ingredients":[{"type":"crop","name":"목화","count":30}]},{"id":"nuegochi","name":"누에고치","building":"방직소","ingredients":[{"type":"crop","name":"뽕잎","count":5}]},{"id":"myeongjusil","name":"명주실","building":"방직소","ingredients":[{"type":"product","name":"누에고치","count":2}]},{"id":"sil","name":"실","building":"방직소","ingredients":[{"type":"product","name":"솜","count":1}]},{"id":"myeonjigmul","name":"면직물","building":"방직소","ingredients":[{"type":"product","name":"실","count":1}]},{"id":"bidan","name":"비단","building":"방직소","ingredients":[{"type":"product","name":"명주실","count":1}]},{"id":"batjul","name":"밧줄","building":"방직소","ingredients":[{"type":"product","name":"면직물","count":1}]},{"id":"hanbok","name":"한복","building":"한복점","ingredients":[{"type":"product","name":"비단","count":1}]},{"id":"syeocheu","name":"셔츠","building":"양복점","ingredients":[{"type":"product","name":"면직물","count":3}]},{"id":"milguksumyeon","name":"밀국수면","building":"제면소","ingredients":[{"type":"product","name":"밀가루","count":1},{"type":"item","name":"소금","count":5}]},{"id":"ssalguksumyeon","name":"쌀국수면","building":"제면소","ingredients":[{"type":"product","name":"쌀가루","count":1},{"type":"item","name":"소금","count":5}]},{"id":"memilmyeon","name":"메밀면","building":"제면소","ingredients":[{"type":"product","name":"메밀가루","count":1},{"type":"product","name":"밀가루","count":1},{"type":"item","name":"소금","count":5}]},{"id":"ramyeonmyeon","name":"라면면","building":"제면소","ingredients":[{"type":"product","name":"밀가루","count":1},{"type":"product","name":"식용유","count":2},{"type":"item","name":"소금","count":5}]},{"id":"udongmyeon","name":"우동면","building":"제면소","ingredients":[{"type":"product","name":"밀가루","count":1},{"type":"product","name":"식초","count":1},{"type":"item","name":"소금","count":5}]},{"id":"oipikel","name":"오이피클","building":"절임장","ingredients":[{"type":"crop","name":"오이","count":30},{"type":"product","name":"설탕","count":1},{"type":"product","name":"식초","count":1},{"type":"item","name":"소금","count":5}]},{"id":"dubupikel","name":"두부피클","building":"절임장","ingredients":[{"type":"product","name":"두부","count":2},{"type":"product","name":"설탕","count":1},{"type":"product","name":"식초","count":1},{"type":"item","name":"소금","count":5}]},{"id":"deodeokjangajji","name":"더덕장아찌","building":"절임장","ingredients":[{"type":"crop","name":"더덕","count":30},{"type":"product","name":"고추장","count":1},{"type":"product","name":"설탕","count":1},{"type":"product","name":"참기름","count":1}]},{"id":"chamoejangajji","name":"참외장아찌","building":"절임장","ingredients":[{"type":"crop","name":"참외","count":30},{"type":"product","name":"설탕","count":1},{"type":"product","name":"간장","count":1},{"type":"product","name":"식초","count":1}]},{"id":"kollabissammu","name":"콜라비쌈무","building":"절임장","ingredients":[{"type":"crop","name":"콜라비","count":30},{"type":"product","name":"설탕","count":1},{"type":"product","name":"식초","count":1},{"type":"product","name":"겨자소스","count":1}]},{"id":"jangmikkotcha","name":"장미꽃차","building":"전통찻집","ingredients":[{"type":"crop","name":"장미","count":30}]},{"id":"insamcha","name":"인삼차","building":"전통찻집","ingredients":[{"type":"crop","name":"인삼","count":30},{"type":"crop","name":"생강","count":30}]},{"id":"heobeucha","name":"허브차","building":"전통찻집","ingredients":[{"type":"crop","name":"로즈마리","count":30},{"type":"crop","name":"캐모마일","count":30},{"type":"crop","name":"페퍼민트","count":30}]},{"id":"sagwajam","name":"사과잼","building":"잼제조장","ingredients":[{"type":"crop","name":"사과","count":30},{"type":"product","name":"설탕","count":2}]},{"id":"ttalgijam","name":"딸기잼","building":"잼제조장","ingredients":[{"type":"crop","name":"딸기","count":30},{"type":"product","name":"설탕","count":2}]},{"id":"gamgyuljam","name":"감귤잼","building":"잼제조장","ingredients":[{"type":"crop","name":"감귤","count":30},{"type":"product","name":"설탕","count":2}]},{"id":"ttangkongjam","name":"땅콩잼","building":"잼제조장","ingredients":[{"type":"crop","name":"땅콩","count":30},{"type":"item","name":"소금","count":5}]},{"id":"papeurikajam","name":"파프리카잼","building":"잼제조장","ingredients":[{"type":"crop","name":"파프리카","count":30},{"type":"product","name":"설탕","count":2}]},{"id":"boksungajam","name":"복숭아잼","building":"잼제조장","ingredients":[{"type":"crop","name":"복숭아","count":30},{"type":"product","name":"설탕","count":2}]},{"id":"somsatang","name":"솜사탕","building":"단구슬집","ingredients":[{"type":"product","name":"설탕","count":2}]},{"id":"nurungjisatang","name":"누룽지사탕","building":"단구슬집","ingredients":[{"type":"product","name":"누룽지","count":2},{"type":"product","name":"설탕","count":2}]},{"id":"bakhasatang","name":"박하사탕","building":"단구슬집","ingredients":[{"type":"crop","name":"박하","count":30},{"type":"product","name":"설탕","count":2}]},{"id":"keopisatang","name":"커피사탕","building":"단구슬집","ingredients":[{"type":"crop","name":"커피","count":30},{"type":"product","name":"설탕","count":2}]},{"id":"hobakyeot","name":"호박엿","building":"단구슬집","ingredients":[{"type":"crop","name":"천둥호박","count":30},{"type":"product","name":"들기름","count":2}]},{"id":"ssalyeot","name":"쌀엿","building":"단구슬집","ingredients":[{"type":"product","name":"백미","count":1},{"type":"product","name":"콩가루","count":2},{"type":"product","name":"엿기름","count":2}]},{"id":"ttangkongyeot","name":"땅콩엿","building":"단구슬집","ingredients":[{"type":"crop","name":"땅콩","count":30},{"type":"crop","name":"참깨","count":30},{"type":"product","name":"엿기름","count":2}]},{"id":"duyu","name":"두유","building":"음료점","ingredients":[{"type":"crop","name":"대두","count":30},{"type":"crop","name":"우유","count":5}]},{"id":"insamjuseu","name":"인삼주스","building":"음료점","ingredients":[{"type":"crop","name":"인삼","count":30},{"type":"product","name":"두유","count":2}]},{"id":"geongangjuseu","name":"건강주스","building":"음료점","ingredients":[{"type":"crop","name":"토마토","count":30},{"type":"crop","name":"알로에","count":30},{"type":"crop","name":"수박","count":30},{"type":"crop","name":"브로콜리","count":30}]},{"id":"misutgaru","name":"미숫가루","building":"음료점","ingredients":[{"type":"product","name":"쌀가루","count":1},{"type":"product","name":"콩가루","count":2},{"type":"product","name":"두유","count":2},{"type":"product","name":"설탕","count":1}]},{"id":"sikhye","name":"식혜","building":"음료점","ingredients":[{"type":"product","name":"백미","count":1},{"type":"product","name":"엿기름","count":2},{"type":"product","name":"물엿","count":2},{"type":"crop","name":"생강","count":30}]},{"id":"janchiguksu","name":"잔치국수","building":"국수전문점","ingredients":[{"type":"product","name":"밀국수면","count":1},{"type":"product","name":"간장","count":1},{"type":"crop","name":"애호박","count":30},{"type":"crop","name":"당근","count":30}]},{"id":"doenjang","name":"된장","building":"장집","ingredients":[{"type":"crop","name":"대두","count":30},{"type":"item","name":"소금","count":5},{"type":"crop","name":"발효액","count":5}]},{"id":"ganjang","name":"간장","building":"장집","ingredients":[{"type":"crop","name":"대두","count":30},{"type":"product","name":"밀가루","count":1},{"type":"item","name":"소금","count":5}]},{"id":"gochujang","name":"고추장","building":"장집","ingredients":[{"type":"product","name":"찹쌀가루","count":1},{"type":"product","name":"고춧가루","count":1},{"type":"product","name":"엿기름","count":1},{"type":"item","name":"소금","count":5}]}]}'),L=JSON.parse('{"K":[{"name":"벼","difficulty":1},{"name":"찰벼","difficulty":1},{"name":"흑미벼","difficulty":1},{"name":"보리","difficulty":1},{"name":"참깨","difficulty":1},{"name":"들깨","difficulty":1},{"name":"대두","difficulty":1},{"name":"사탕수수","difficulty":1},{"name":"고추","difficulty":1},{"name":"밀","difficulty":1},{"name":"옥수수","difficulty":1},{"name":"메밀","difficulty":1},{"name":"응고제","difficulty":1},{"name":"팥","difficulty":1},{"name":"천둥호박","difficulty":1},{"name":"고구마","difficulty":1},{"name":"무","difficulty":1},{"name":"토마토","difficulty":1},{"name":"파인애플","difficulty":1},{"name":"포도","difficulty":1},{"name":"애플망고","difficulty":1},{"name":"개똥쑥","difficulty":1},{"name":"양배추","difficulty":1},{"name":"당근","difficulty":1},{"name":"배","difficulty":1},{"name":"도라지","difficulty":1},{"name":"여주","difficulty":1},{"name":"삼채","difficulty":1},{"name":"브로콜리","difficulty":1},{"name":"콜라비","difficulty":1},{"name":"가시오가피","difficulty":1},{"name":"상황버섯","difficulty":1},{"name":"차가버섯","difficulty":1},{"name":"노루궁뎅이버섯","difficulty":1},{"name":"사과","difficulty":1},{"name":"달걀","difficulty":1},{"name":"겨자","difficulty":1},{"name":"양파","difficulty":1},{"name":"배추","difficulty":1},{"name":"미나리","difficulty":1},{"name":"오이","difficulty":1},{"name":"파","difficulty":1},{"name":"생강","difficulty":1},{"name":"닥나무","difficulty":1},{"name":"모시풀","difficulty":1},{"name":"목화","difficulty":1},{"name":"뽕잎","difficulty":1},{"name":"솔","difficulty":1},{"name":"더덕","difficulty":1},{"name":"참외","difficulty":1},{"name":"장미","difficulty":1},{"name":"인삼","difficulty":1},{"name":"로즈마리","difficulty":1},{"name":"캐모마일","difficulty":1},{"name":"페퍼민트","difficulty":1},{"name":"딸기","difficulty":1},{"name":"감귤","difficulty":1},{"name":"땅콩","difficulty":1},{"name":"파프리카","difficulty":1},{"name":"복숭아","difficulty":1},{"name":"박하","difficulty":1},{"name":"커피","difficulty":1},{"name":"우유","difficulty":1},{"name":"알로에","difficulty":1},{"name":"수박","difficulty":1},{"name":"애호박","difficulty":1},{"name":"발효액","difficulty":1}]}');const D="realfarm_custom_products",E="realfarm_custom_crops",w=["응고제","소금","발효액","이스트","달걀","우유","뽕잎"];function x(){try{const e=localStorage.getItem(D);return e?JSON.parse(e):[]}catch(e){return console.error("Failed to load custom products:",e),[]}}function T(e){try{return localStorage.setItem(D,JSON.stringify(e)),!0}catch(t){return console.error("Failed to save custom products:",t),!1}}function X(){const e=I.Z||[],t=x(),n=new Map;return e.forEach(e=>{n.set(e.id,{...e,isCustom:!1})}),t.forEach(e=>{n.set(e.id,{...e,isCustom:!0})}),Array.from(n.values())}function P(e){const t=x();if(t.some(t=>t.id===e.id))return{success:!1,error:"이미 존재하는 ID입니다."};const n=X();if(n.some(t=>t.name===e.name&&t.id!==e.id))return{success:!1,error:"이미 존재하는 가공품 이름입니다."};t.push(e);const i=T(t);return i?{success:!0}:{success:!1,error:"저장에 실패했습니다."}}function F(e,t){const n=x(),i=n.findIndex(t=>t.id===e);if(-1===i)return{success:!1,error:"가공품을 찾을 수 없습니다."};const a=X();if(a.some(n=>n.name===t.name&&n.id!==e))return{success:!1,error:"이미 존재하는 가공품 이름입니다."};n[i]={...t,id:e};const o=T(n);return o?{success:!0}:{success:!1,error:"수정에 실패했습니다."}}function S(e){const t=x(),n=t.filter(t=>t.id!==e);if(n.length===t.length)return{success:!1,error:"가공품을 찾을 수 없습니다."};const i=T(n);return i?{success:!0}:{success:!1,error:"삭제에 실패했습니다."}}function M(){const e=L.K||[],t=A(),n=new Map;return e.forEach(e=>{n.set(e.name,{...e,isCustom:!1})}),t.forEach(e=>{n.set(e.name,{...e,isCustom:!0})}),Array.from(n.values())}function A(){try{const e=localStorage.getItem(E);return e?JSON.parse(e):[]}catch(e){return console.error("Failed to load custom crops:",e),[]}}function _(e){try{return localStorage.setItem(E,JSON.stringify(e)),!0}catch(t){return console.error("Failed to save custom crops:",t),!1}}function j(e){const t=M(),n=t.find(t=>t.name===e);return n&&n.difficulty||0}function $(e){return w.includes(e)}function Q(){try{const e=x(),t=JSON.stringify(e,null,2),n=new Blob([t],{type:"application/json"}),i=URL.createObjectURL(n),a=document.createElement("a");return a.href=i,a.download=`realfarm-products-${(new Date).toISOString().split("T")[0]}.json`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(i),{success:!0}}catch(e){return console.error("Failed to export products:",e),{success:!1,error:"내보내기에 실패했습니다."}}}function R(e){return new Promise(t=>{const n=new FileReader;n.onload=e=>{try{const n=JSON.parse(e.target.result);if(!Array.isArray(n))return void t({success:!1,error:"잘못된 파일 형식입니다. 배열이어야 합니다."});const i=n.filter(e=>e.id&&e.name&&e.building&&Array.isArray(e.ingredients));if(0===i.length)return void t({success:!1,error:"유효한 가공품 데이터가 없습니다."});const a=x(),o=new Map;a.forEach(e=>o.set(e.id,e)),i.forEach(e=>o.set(e.id,e));const s=Array.from(o.values()),r=T(s);t(r?{success:!0,imported:i.length,total:s.length}:{success:!1,error:"저장에 실패했습니다."})}catch(e){console.error("Failed to import products:",e),t({success:!1,error:"파일을 읽는 중 오류가 발생했습니다."})}},n.onerror=()=>{t({success:!1,error:"파일을 읽는 중 오류가 발생했습니다."})},n.readAsText(e)})}const K=()=>"undefined"!==typeof crypto&&crypto.randomUUID?crypto.randomUUID():`pi-${Date.now().toString(36)}-${Math.random().toString(36).slice(2,10)}`,O=(e={})=>({id:K(),name:"",quantity:1,...e});var N={name:"SearchForm",emits:["search"],data(){return{productItems:[O()],allProductNames:[],autocompleteVisible:{},autocompleteItems:{},selectedIndex:{},isComposing:{},nameInputRefs:{},quantityInputRefs:{}}},computed:{isValid(){return this.productItems.length>0&&this.productItems.every(e=>""!==e.name.trim()&&null!==e.quantity&&void 0!==e.quantity&&""!==e.quantity&&e.quantity>0)}},methods:{loadProductNames(){const e=X();this.allProductNames=e.map(e=>e.name).sort()},handleInput(e,t){const n=t.target.value.trim();n.length>0?(this.autocompleteItems[e]=this.allProductNames.filter(e=>e.startsWith(n)),this.autocompleteVisible[e]=this.autocompleteItems[e].length>0,this.selectedIndex[e]=0):(this.autocompleteVisible[e]=!1,this.autocompleteItems[e]=[],this.selectedIndex[e]=-1)},handleCompositionStart(e){this.isComposing[e]=!0},handleCompositionEnd(e,t){this.isComposing[e]=!1,t&&t.target&&this.handleInput(e,t)},handleFocus(e,t){const n=this.productItems[e].name.trim();if(n.length>0&&(this.autocompleteItems[e]=this.allProductNames.filter(e=>e.startsWith(n)),this.autocompleteVisible[e]=this.autocompleteItems[e].length>0,this.selectedIndex[e]=0),t&&t.target){const e=t.target;e.setAttribute("lang","ko"),e.setAttribute("inputmode","text"),e.style&&(e.style.imeMode="active",e.style.webkitImeMode="active"),this.$nextTick(()=>{e.style&&(e.style.imeMode="active",e.style.webkitImeMode="active")})}},handleBlur(e){setTimeout(()=>{this.autocompleteVisible[e]=!1},200)},handleArrowDown(e,t){if(this.autocompleteVisible[e]&&this.autocompleteItems[e].length>0)t.preventDefault(),this.selectedIndex[e]=Math.min((this.selectedIndex[e]||0)+1,this.autocompleteItems[e].length-1);else if(t.preventDefault(),e<this.productItems.length-1){const t=this.productItems[e+1];t&&this.$nextTick(()=>{const e=this.nameInputRefs[t.id];e&&e.focus()})}else this.addProduct()},handleArrowUp(e,t){if(this.autocompleteVisible[e]&&this.autocompleteItems[e].length>0)t.preventDefault(),this.selectedIndex[e]=Math.max((this.selectedIndex[e]||0)-1,0);else if(t.preventDefault(),e>0){const t=this.productItems[e-1];t&&this.$nextTick(()=>{const e=this.nameInputRefs[t.id];e&&e.focus()})}},selectSuggestion(e,t){this.productItems[e].name=t,this.autocompleteVisible[e]=!1},handleEnterOnName(e,t){this.isComposing[e]||(this.autocompleteVisible[e]&&this.autocompleteItems[e].length>0&&this.selectedIndex[e]>=0?(t.preventDefault(),this.selectSuggestion(e,this.autocompleteItems[e][this.selectedIndex[e]])):(t.preventDefault(),this.focusQuantity(e)))},focusNameInputWithIME(e){const t=this.productItems[e];t&&this.$nextTick(()=>{setTimeout(()=>{const e=this.nameInputRefs[t.id];e&&(e.setAttribute("lang","ko"),e.setAttribute("inputmode","text"),e.style&&(e.style.imeMode="active",e.style.webkitImeMode="active"),e.focus(),e.style&&(e.style.imeMode="active",e.style.webkitImeMode="active"))},0)})},addProduct(){this.productItems.push(O())},removeProduct(e){this.productItems.length>1&&this.productItems.splice(e,1)},focusQuantity(e){const t=this.productItems[e];t&&this.$nextTick(()=>{setTimeout(()=>{const e=this.quantityInputRefs[t.id];e&&e.focus()},0)})},handleEnterOnQuantity(e,t){t.ctrlKey||t.metaKey?(t.preventDefault(),this.addProduct()):this.handleSearch()},handleArrowDownQuantity(e,t){if(t.preventDefault(),e<this.productItems.length-1){const t=this.productItems[e+1];t&&this.$nextTick(()=>{const e=this.quantityInputRefs[t.id];e&&e.focus()})}else this.addProduct(),this.$nextTick(()=>{const t=this.productItems[e+1];if(t){const e=this.nameInputRefs[t.id];e&&e.focus()}})},handleArrowUpQuantity(e,t){if(t.preventDefault(),e>0){const t=this.productItems[e-1];t&&this.$nextTick(()=>{const e=this.quantityInputRefs[t.id];e&&e.focus()})}},handleDeleteOnName(e,t){(t.ctrlKey||t.metaKey)&&(t.preventDefault(),this.productItems.length>1&&this.removeProduct(e))},handleBackspaceOnName(e,t){const n=t.target;""===n.value&&0===n.selectionStart&&0===n.selectionEnd?this.productItems.length>1&&(t.preventDefault(),this.removeProduct(e)):(t.ctrlKey||t.metaKey)&&(t.preventDefault(),this.productItems.length>1&&this.removeProduct(e))},handleDeleteOnQuantity(e,t){(t.ctrlKey||t.metaKey)&&(t.preventDefault(),this.productItems.length>1&&this.removeProduct(e))},handleFocusQuantity(e,t){const n=t.target;n.value&&this.$nextTick(()=>{n.select()})},handleQuantityInput(e,t){const n=t.target.value;""!==n&&null!==n&&void 0!==n||(this.productItems[e].quantity=null)},handleBackspaceOnQuantity(e,t){const n=t.target;"1"===n.value&&0===n.selectionStart&&0===n.selectionEnd?this.productItems.length>1&&(t.preventDefault(),this.removeProduct(e)):(t.ctrlKey||t.metaKey)&&(t.preventDefault(),this.productItems.length>1&&this.removeProduct(e))},handleArrowRightOnName(e,t){const n=t.target,i=n.selectionStart===n.selectionEnd&&n.selectionEnd===n.value.length;if(!i)return;t.preventDefault();const a=this.productItems[e];a&&this.$nextTick(()=>{const e=this.quantityInputRefs[a.id];e&&e.focus()})},handleArrowLeftOnQuantity(e,t){const n=t.target,i=n.selectionStart,a=n.selectionEnd,o="number"===typeof i&&"number"===typeof a,s=!o||i===a&&0===i;if(o&&i!==a)return;if(!s)return;t.preventDefault();const r=this.productItems[e];r&&this.$nextTick(()=>{const e=this.nameInputRefs[r.id];e&&e.focus()})},handleSearch(){if(this.isValid){const e=this.productItems.filter(e=>""!==e.name.trim()&&null!==e.quantity&&void 0!==e.quantity&&""!==e.quantity&&e.quantity>0).map(e=>({name:e.name.trim(),quantity:parseInt(e.quantity)||1}));this.$emit("search",e)}},handleGlobalShortcuts(e){const t=document.activeElement;(!t||"INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName)&&(e.ctrlKey||e.metaKey)&&"Enter"===e.key&&(e.preventDefault(),this.addProduct())}},mounted(){this.loadProductNames(),document.addEventListener("keydown",this.handleGlobalShortcuts)},updated(){this.$nextTick(()=>{const e=document.querySelectorAll(".product-name-input");e.forEach(e=>{e.setAttribute("lang","ko"),e.setAttribute("inputmode","text"),e.style&&(e.style.imeMode="active",e.style.webkitImeMode="active")})})},beforeUnmount(){document.removeEventListener("keydown",this.handleGlobalShortcuts)}},U=n(262);const V=(0,U.A)(N,[["render",C],["__scopeId","data-v-7a4f9942"]]);var q=V;const J={key:0,class:"result-display"},B={key:0,class:"error-message"},W={key:1},G={class:"result-header"},z={key:0,class:"target-products-list"},Z={class:"target-items"},H={key:0},Y={key:1,class:"target-info"},ee={class:"result-section"},te={key:0,class:"crops-list"},ne=["onClick","title"],ie={class:"crop-name"},ae={class:"crop-count"},oe={key:1,class:"no-data"},se={class:"result-section"},re={key:0,class:"items-list"},ce={class:"item-name"},le={class:"item-count"},ue={key:1,class:"no-data"},de={class:"result-section"},me={key:0,class:"products-list"},pe=["onClick","title"],he={class:"product-header"},fe={class:"product-name"},ge={class:"product-count"},ye={class:"product-footer"},be={key:0,class:"purchase-badge"},ke={key:1,class:"no-data"},ve={class:"result-section"},Ce={key:0,class:"buildings-list"},Ie={class:"building-name"},Le={class:"building-products"},De={key:0},Ee={key:1,class:"no-data"},we={class:"modal-header"},xe={class:"modal-body"},Te={key:0},Xe={class:"modal-description"},Pe={key:0,class:"related-products"},Fe={class:"product-building"},Se={class:"product-name"},Me={key:1,class:"no-related"},Ae={key:1},_e={class:"modal-description"},je={key:0,class:"ingredients-list"},$e={class:"ingredient-type"},Qe={class:"ingredient-name"},Re={class:"ingredient-count"},Ke={key:1,class:"no-related"};function Oe(e,t,n,o,s,r){const c=(0,a.g2)("RecipeChain");return n.result?((0,a.uX)(),(0,a.CE)("div",J,[n.result.error?((0,a.uX)(),(0,a.CE)("div",B,[(0,a.Lk)("p",null,(0,m.v_)(n.result.error),1)])):((0,a.uX)(),(0,a.CE)("div",W,[(0,a.Lk)("div",G,[t[4]||(t[4]=(0,a.Lk)("h2",null,"계산 결과",-1)),n.result.targetProducts&&n.result.targetProducts.length>0?((0,a.uX)(),(0,a.CE)("div",z,[t[3]||(t[3]=(0,a.Lk)("p",{class:"target-info-label"},"목표 가공품:",-1)),(0,a.Lk)("div",Z,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.result.targetProducts,(e,t)=>((0,a.uX)(),(0,a.CE)("span",{key:t,class:"target-item"},[(0,a.Lk)("strong",null,(0,m.v_)(e.name),1),(0,a.eW)(" "+(0,m.v_)(e.quantity)+"개 ",1),t<n.result.targetProducts.length-1?((0,a.uX)(),(0,a.CE)("span",H,", ")):(0,a.Q3)("",!0)]))),128))])])):((0,a.uX)(),(0,a.CE)("p",Y,[(0,a.Lk)("strong",null,(0,m.v_)(n.result.targetProduct),1),(0,a.eW)(" "+(0,m.v_)(n.result.targetQuantity)+"개 생산 필요 ",1)]))]),(0,a.Lk)("div",ee,[t[5]||(t[5]=(0,a.Lk)("h3",null,"필요한 작물",-1)),n.result.formattedCrops&&n.result.formattedCrops.length>0?((0,a.uX)(),(0,a.CE)("div",te,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.result.formattedCrops,(e,t)=>((0,a.uX)(),(0,a.CE)("div",{key:e.name,class:(0,m.C4)(["crop-item clickable",{selected:s.selectedIndex===r.getItemIndex("crop",t)}]),style:(0,m.Tr)(r.getDifficultyStyle(e.difficulty)),onClick:t=>r.showCropDetails(e.name),ref_for:!0,ref:e=>{e&&r.setItemRef("crop",t,e)},title:"클릭하여 "+e.name+"이(가) 필요한 가공품 보기 (난이도: "+e.difficulty+")"},[(0,a.Lk)("span",ie,(0,m.v_)(e.name),1),(0,a.Lk)("span",ae,(0,m.v_)(e.count)+"개",1),(0,a.Lk)("span",{class:"difficulty-badge",style:(0,m.Tr)(r.getDifficultyBadgeStyle(e.difficulty))}," 난이도 "+(0,m.v_)(e.difficulty),5)],14,ne))),128))])):((0,a.uX)(),(0,a.CE)("p",oe,"필요한 작물이 없습니다."))]),(0,a.Lk)("div",se,[t[6]||(t[6]=(0,a.Lk)("h3",null,"필요한 아이템",-1)),n.result.formattedItems&&n.result.formattedItems.length>0?((0,a.uX)(),(0,a.CE)("div",re,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.result.formattedItems,e=>((0,a.uX)(),(0,a.CE)("div",{key:e.name,class:"item-item",style:(0,m.Tr)(r.getDifficultyStyle(0))},[(0,a.Lk)("span",ce,(0,m.v_)(e.name),1),(0,a.Lk)("span",le,(0,m.v_)(e.count)+"개",1),(0,a.Lk)("span",{class:"difficulty-badge",style:(0,m.Tr)(r.getDifficultyBadgeStyle(0))}," 난이도 0 ",4)],4))),128))])):((0,a.uX)(),(0,a.CE)("p",ue,"필요한 아이템이 없습니다."))]),(0,a.Lk)("div",de,[t[7]||(t[7]=(0,a.Lk)("h3",null,"필요한 가공품",-1)),n.result.formattedProducts&&n.result.formattedProducts.length>0?((0,a.uX)(),(0,a.CE)("div",me,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.result.formattedProducts,(e,t)=>((0,a.uX)(),(0,a.CE)("div",{key:e.name,class:(0,m.C4)(["product-item clickable",{selected:s.selectedIndex===r.getItemIndex("product",t)}]),style:(0,m.Tr)(r.getDifficultyStyle(e.difficulty)),onClick:t=>r.showProductDetails(e.name),ref_for:!0,ref:e=>{e&&r.setItemRef("product",t,e)},title:"클릭하여 "+e.name+"의 재료 보기 (난이도: "+e.difficulty+(e.purchasable&&e.price?", 구매가: "+e.price+"P":"")+")"},[(0,a.Lk)("div",he,[(0,a.Lk)("span",fe,(0,m.v_)(e.name),1),(0,a.Lk)("span",ge,(0,m.v_)(e.count)+"개",1)]),(0,a.Lk)("div",ye,[(0,a.Lk)("span",{class:"difficulty-badge",style:(0,m.Tr)(r.getDifficultyBadgeStyle(e.difficulty))}," 난이도 "+(0,m.v_)(e.difficulty),5),e.purchasable&&e.price?((0,a.uX)(),(0,a.CE)("span",be," 구매 "+(0,m.v_)(e.price)+"P ",1)):(0,a.Q3)("",!0)])],14,pe))),128))])):((0,a.uX)(),(0,a.CE)("p",ke,"필요한 가공품이 없습니다."))]),(0,a.Lk)("div",ve,[t[8]||(t[8]=(0,a.Lk)("h3",null,"건물별 가공품",-1)),n.result.formattedBuildings&&n.result.formattedBuildings.length>0?((0,a.uX)(),(0,a.CE)("div",Ce,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.result.formattedBuildings,e=>((0,a.uX)(),(0,a.CE)("div",{key:e.building,class:"building-item"},[(0,a.Lk)("div",Ie,(0,m.v_)(e.building),1),(0,a.Lk)("div",Le,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.products,(t,n)=>((0,a.uX)(),(0,a.CE)("span",{key:t,class:"building-product-tag"},[(0,a.eW)((0,m.v_)(t),1),n<e.products.length-1?((0,a.uX)(),(0,a.CE)("span",De,", ")):(0,a.Q3)("",!0)]))),128))])]))),128))])):((0,a.uX)(),(0,a.CE)("p",Ee,"건물 정보가 없습니다."))]),(0,a.bF)(c,{dependencyChain:n.result.dependencyChain},null,8,["dependencyChain"])])),s.showModal?((0,a.uX)(),(0,a.CE)("div",{key:2,class:"modal-overlay",onClick:t[2]||(t[2]=(...e)=>r.closeModal&&r.closeModal(...e))},[(0,a.Lk)("div",{class:"modal-content",onClick:t[1]||(t[1]=(0,i.D$)(()=>{},["stop"]))},[(0,a.Lk)("div",we,[(0,a.Lk)("h3",null,(0,m.v_)(s.modalTitle),1),(0,a.Lk)("button",{class:"modal-close",onClick:t[0]||(t[0]=(...e)=>r.closeModal&&r.closeModal(...e))},"×")]),(0,a.Lk)("div",xe,["crop"===s.modalType?((0,a.uX)(),(0,a.CE)("div",Te,[(0,a.Lk)("p",Xe,(0,m.v_)(s.selectedItem)+"이(가) 필요한 가공품:",1),s.relatedProducts.length>0?((0,a.uX)(),(0,a.CE)("div",Pe,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(s.relatedProducts,e=>((0,a.uX)(),(0,a.CE)("div",{key:e.name,class:"related-product-item"},[(0,a.Lk)("span",Fe,(0,m.v_)(e.building),1),(0,a.Lk)("span",Se,(0,m.v_)(e.name),1)]))),128))])):((0,a.uX)(),(0,a.CE)("p",Me,"이 작물을 사용하는 가공품이 없습니다."))])):"product"===s.modalType?((0,a.uX)(),(0,a.CE)("div",Ae,[(0,a.Lk)("p",_e,(0,m.v_)(s.selectedItem)+"의 재료:",1),s.productIngredients?((0,a.uX)(),(0,a.CE)("div",je,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(s.productIngredients.ingredients,(e,t)=>((0,a.uX)(),(0,a.CE)("div",{key:t,class:"ingredient-item"},[(0,a.Lk)("span",$e,(0,m.v_)("crop"===e.type?"작물":"가공품"),1),(0,a.Lk)("span",Qe,(0,m.v_)(e.name),1),(0,a.Lk)("span",Re,(0,m.v_)(e.count)+"개",1)]))),128))])):((0,a.uX)(),(0,a.CE)("div",Ke,"재료 정보를 찾을 수 없습니다."))])):(0,a.Q3)("",!0)])])])):(0,a.Q3)("",!0)])):(0,a.Q3)("",!0)}const Ne={key:0,class:"recipe-chain"},Ue={class:"chain-container"},Ve={class:"chain-product"},qe={class:"product-box"},Je={class:"product-name"},Be={class:"product-building"},We={key:0,class:"chain-arrow"};function Ge(e,t,n,i,o,s){return n.dependencyChain&&n.dependencyChain.length>0?((0,a.uX)(),(0,a.CE)("div",Ne,[t[0]||(t[0]=(0,a.Lk)("h3",null,"의존성 체인",-1)),(0,a.Lk)("div",Ue,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.dependencyChain,(e,t)=>((0,a.uX)(),(0,a.CE)("div",{key:e.id||e.name,class:"chain-item"},[(0,a.Lk)("div",Ve,[(0,a.Lk)("div",qe,[(0,a.Lk)("div",Je,(0,m.v_)(e.name),1),(0,a.Lk)("div",Be,(0,m.v_)(e.building),1)])]),t<n.dependencyChain.length-1?((0,a.uX)(),(0,a.CE)("div",We,"→")):(0,a.Q3)("",!0)]))),128))])])):(0,a.Q3)("",!0)}var ze={name:"RecipeChain",props:{dependencyChain:{type:Array,default:()=>[]}}};const Ze=(0,U.A)(ze,[["render",Ge],["__scopeId","data-v-99a79ff2"]]);var He=Ze;function Ye(e,t){return e.find(e=>e.name===t)||null}function et(e,t,n=new Set){const i=Ye(e,t);if(!i)return[];if(n.has(t))return[];n.add(t);const a=[];return i.ingredients.forEach(t=>{if("product"===t.type){const i=et(e,t.name,new Set(n));a.push(...i),a.some(e=>e.name===t.name)||a.push(Ye(e,t.name))}}),a.some(e=>e.name===t)||a.push(i),a}function tt(e){const t={};return e.forEach(e=>{t[e.building]||(t[e.building]=[]),t[e.building].some(t=>t.name===e.name)||t[e.building].push(e)}),t}function nt(e,t,n=new Set){const i=[],a=e.filter(e=>e.ingredients.some(e=>"crop"===e.type&&e.name===t));a.forEach(e=>{n.has(e.name)||(n.add(e.name),i.push(e))});const o=(t,n)=>{const a=it(e,t,new Set(n));a.forEach(e=>{n.has(e.name)||(n.add(e.name),i.push(e),o(e.name,n))})};return a.forEach(e=>{o(e.name,new Set(n))}),i}function it(e,t,n=new Set){const i=[];return e.forEach(e=>{if(n.has(e.name))return;const a=e.ingredients.some(e=>"product"===e.type&&e.name===t);a&&(n.add(e.name),i.push(e))}),i}function at(e,t){return Ye(e,t)}var ot={name:"ResultDisplay",components:{RecipeChain:He},props:{result:{type:Object,default:null}},data(){return{showModal:!1,modalType:null,selectedItem:"",modalTitle:"",relatedProducts:[],productIngredients:null,selectedIndex:-1,itemRefs:{},gridColumns:0}},methods:{getDifficultyStyle(e){const t=100,n=Math.min(e/t,1),i=232,a=245,o=233,s=Math.floor(i-50*n),r=Math.floor(a-40*n),c=Math.floor(o-30*n);return{backgroundColor:`rgb(${s}, ${r}, ${c})`,borderLeftColor:`rgb(${Math.max(0,s-30)}, ${Math.max(0,r-30)}, ${Math.max(0,c-30)})`}},getDifficultyBadgeStyle(e){const t=100,n=Math.min(e/t,1),i=102,a=187,o=106,s=Math.floor(i-30*n),r=Math.floor(a-50*n),c=Math.floor(o-30*n);return{backgroundColor:`rgb(${s}, ${r}, ${c})`}},showCropDetails(e){const t=X(),n=this.result.dependencyChain||[],i=new Set(n.map(e=>e.name)),a=nt(t,e).filter(e=>i.has(e.name));this.modalType="crop",this.selectedItem=e,this.modalTitle=`${e}이(가) 필요한 가공품`,this.relatedProducts=a,this.showModal=!0},showProductDetails(e){const t=X(),n=at(t,e);this.modalType="product",this.selectedItem=e,this.modalTitle=`${e}의 재료`,this.productIngredients=n,this.showModal=!0},closeModal(){this.showModal=!1,this.modalType=null,this.selectedItem="",this.relatedProducts=[],this.productIngredients=null},getItemIndex(e,t){let n=0;return"crop"===e?n=0:"product"===e&&(n=(this.result.formattedCrops||[]).length),n+t},setItemRef(e,t,n){const i=this.getItemIndex(e,t);this.itemRefs[i]=n},getAllClickableItems(){const e=[];return this.result.formattedCrops&&this.result.formattedCrops.forEach((t,n)=>{e.push({type:"crop",index:n,name:t.name,globalIndex:this.getItemIndex("crop",n)})}),this.result.formattedProducts&&this.result.formattedProducts.forEach((t,n)=>{e.push({type:"product",index:n,name:t.name,globalIndex:this.getItemIndex("product",n)})}),e},calculateGridColumns(){const e=document.querySelector(".crops-list, .products-list");if(e){const t=window.getComputedStyle(e),n=t.gridTemplateColumns;if(n&&"none"!==n){const e=n.split(" ").filter(e=>""!==e.trim()).length;if(e>0)return this.gridColumns=e,void console.log("Grid columns from template:",this.gridColumns)}const i=e.querySelector(".crop-item, .product-item");if(i){const n=i.offsetWidth,a=parseInt(t.gap)||10,o=e.offsetWidth;if(n>0){const e=Math.floor((o+a)/(n+a));return this.gridColumns=Math.max(e,1),void console.log("Grid columns from items:",this.gridColumns,{itemWidth:n,gap:a,containerWidth:o})}}const a=e.offsetWidth;this.gridColumns=Math.max(Math.floor(a/220),1),console.log("Grid columns estimated:",this.gridColumns,{width:a})}else this.gridColumns=3,console.log("Grid columns default:",this.gridColumns)},handleKeydown(e){if(e.key.startsWith("Arrow")&&console.log("Arrow key pressed:",e.key,{showModal:this.showModal,selectedIndex:this.selectedIndex,gridColumns:this.gridColumns}),this.showModal)return void console.log("Modal is open, ignoring key");const t=document.activeElement;if(t&&("INPUT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable))return void console.log("Input field focused, ignoring key");const n=this.getAllClickableItems();if(0===n.length)return void console.log("No clickable items");this.gridColumns<=0&&(this.calculateGridColumns(),this.gridColumns<=0&&(this.gridColumns=3),console.log("Grid columns recalculated:",this.gridColumns));let i=this.selectedIndex;switch(e.key){case"ArrowDown":e.preventDefault(),e.stopPropagation(),i=this.selectedIndex<0?0:Math.min(this.selectedIndex+this.gridColumns,n.length-1);break;case"ArrowUp":e.preventDefault(),e.stopPropagation(),i=this.selectedIndex<0?n.length-1:Math.max(this.selectedIndex-this.gridColumns,0);break;case"ArrowRight":if(e.preventDefault(),e.stopPropagation(),console.log("ArrowRight - before:",{selectedIndex:this.selectedIndex,gridColumns:this.gridColumns,itemsLength:n.length}),this.selectedIndex<0)i=0;else{const e=Math.floor(this.selectedIndex/this.gridColumns),t=this.selectedIndex%this.gridColumns,a=t+1;console.log("ArrowRight - calc:",{currentRow:e,currentCol:t,nextCol:a,gridColumns:this.gridColumns}),a<this.gridColumns?(i=e*this.gridColumns+a,i>=n.length&&(i=Math.min((e+1)*this.gridColumns,n.length-1))):i=Math.min((e+1)*this.gridColumns,n.length-1)}console.log("ArrowRight - after:",{newIndex:i});break;case"ArrowLeft":if(e.preventDefault(),e.stopPropagation(),console.log("ArrowLeft - before:",{selectedIndex:this.selectedIndex,gridColumns:this.gridColumns,itemsLength:n.length}),this.selectedIndex<0)i=n.length-1;else{const e=Math.floor(this.selectedIndex/this.gridColumns),t=this.selectedIndex%this.gridColumns,a=t-1;if(console.log("ArrowLeft - calc:",{currentRow:e,currentCol:t,prevCol:a,gridColumns:this.gridColumns}),a>=0)i=e*this.gridColumns+a;else if(e>0){const t=e-1,a=Math.min(this.gridColumns-1,(n.length-1)%this.gridColumns);i=t*this.gridColumns+a}else{const e=Math.floor((n.length-1)/this.gridColumns),t=(n.length-1)%this.gridColumns;i=e*this.gridColumns+t}}console.log("ArrowLeft - after:",{newIndex:i});break;case"Enter":if(this.selectedIndex>=0&&this.selectedIndex<n.length){e.preventDefault(),e.stopPropagation();const t=n[this.selectedIndex];"crop"===t.type?this.showCropDetails(t.name):"product"===t.type&&this.showProductDetails(t.name)}return;default:return}i!==this.selectedIndex&&(this.selectedIndex=i,this.scrollToSelected())},scrollToSelected(){this.$nextTick(()=>{const e=this.itemRefs[this.selectedIndex];e&&e.scrollIntoView({behavior:"smooth",block:"nearest"})})}},mounted(){document.addEventListener("keydown",this.handleKeydown),this.$nextTick(()=>{this.calculateGridColumns()}),window.addEventListener("resize",this.calculateGridColumns),console.log("ResultDisplay mounted, event listener added")},beforeUnmount(){document.removeEventListener("keydown",this.handleKeydown),window.removeEventListener("resize",this.calculateGridColumns)},watch:{result(){this.selectedIndex=-1,this.itemRefs={},this.$nextTick(()=>{this.calculateGridColumns()})}}};const st=(0,U.A)(ot,[["render",Oe],["__scopeId","data-v-b2016f4c"]]);var rt=st;const ct={class:"product-list"},lt={class:"list-header"},ut={class:"header-actions"},dt={class:"search-box"},mt={key:0,class:"form-section"},pt={class:"form-row"},ht={class:"form-group"},ft=["disabled"],gt={class:"form-group"},yt={class:"form-group"},bt={class:"form-group"},kt={key:0,class:"form-group"},vt={class:"form-group form-actions"},Ct={class:"ingredients-section"},It={class:"ingredients-list"},Lt=["onUpdate:modelValue","onChange"],Dt=["onUpdate:modelValue","disabled"],Et=["value"],wt=["onUpdate:modelValue"],xt=["onClick","disabled"],Tt={key:1,class:"empty-message"},Xt={key:2,class:"table-container"},Pt={class:"products-table"},Ft=["onDblclick","title"],St={class:"building-cell"},Mt={class:"difficulty-cell"},At={class:"purchase-cell"},_t={key:0,class:"purchase-badge"},jt={key:1,class:"no-purchase"},$t={class:"ingredients-cell"},Qt={class:"ingredients-display"},Rt=["title"],Kt={class:"actions-cell"},Ot={key:0,class:"action-buttons"},Nt=["onClick"],Ut={class:"modal-actions"};function Vt(e,t,n,o,s,r){return(0,a.uX)(),(0,a.CE)("div",ct,[(0,a.Lk)("div",lt,[t[14]||(t[14]=(0,a.Lk)("h2",null,"가공품 목록",-1)),(0,a.Lk)("div",ut,[(0,a.Lk)("div",dt,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>s.searchQuery=e),type:"text",placeholder:"가공품 이름, 건물, 재료로 검색...",class:"search-input"},null,512),[[i.Jo,s.searchQuery]])]),(0,a.Lk)("button",{onClick:t[1]||(t[1]=e=>s.showAddForm=!0),class:"add-btn"}," + 가공품 추가 ")])]),s.showAddForm||s.editingProduct?((0,a.uX)(),(0,a.CE)("div",mt,[(0,a.Lk)("h3",null,(0,m.v_)(s.editingProduct?"가공품 수정":"가공품 추가"),1),(0,a.Lk)("div",pt,[(0,a.Lk)("div",ht,[t[15]||(t[15]=(0,a.Lk)("label",null,"ID:",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>s.formData.id=e),type:"text",disabled:!!s.editingProduct,placeholder:"예: bread"},null,8,ft),[[i.Jo,s.formData.id]])]),(0,a.Lk)("div",gt,[t[16]||(t[16]=(0,a.Lk)("label",null,"이름:",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>s.formData.name=e),type:"text",placeholder:"예: 빵"},null,512),[[i.Jo,s.formData.name]])]),(0,a.Lk)("div",yt,[t[17]||(t[17]=(0,a.Lk)("label",null,"건물:",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>s.formData.building=e),type:"text",placeholder:"예: 제과소"},null,512),[[i.Jo,s.formData.building]])]),(0,a.Lk)("div",bt,[(0,a.Lk)("label",null,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>s.formData.purchasable=e),type:"checkbox"},null,512),[[i.lH,s.formData.purchasable]]),t[18]||(t[18]=(0,a.eW)(" 구매 가능 ",-1))])]),s.formData.purchasable?((0,a.uX)(),(0,a.CE)("div",kt,[t[19]||(t[19]=(0,a.Lk)("label",null,"구매 가격 (P):",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>s.formData.price=e),type:"number",min:"0",placeholder:"예: 100"},null,512),[[i.Jo,s.formData.price,void 0,{number:!0}]])])):(0,a.Q3)("",!0),(0,a.Lk)("div",vt,[(0,a.Lk)("button",{onClick:t[7]||(t[7]=(...e)=>r.saveProduct&&r.saveProduct(...e)),class:"save-btn"},"저장"),(0,a.Lk)("button",{onClick:t[8]||(t[8]=(...e)=>r.cancelForm&&r.cancelForm(...e)),class:"cancel-btn"},"취소")])]),(0,a.Lk)("div",Ct,[t[22]||(t[22]=(0,a.Lk)("label",null,"재료:",-1)),(0,a.Lk)("div",It,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(s.formData.ingredients,(e,n)=>((0,a.uX)(),(0,a.CE)("div",{key:n,class:"ingredient-row"},[(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":t=>e.type=t,class:"ing-type",onChange:t=>e.name=""},[...t[20]||(t[20]=[(0,a.Lk)("option",{value:"crop"},"작물",-1),(0,a.Lk)("option",{value:"product"},"가공품",-1),(0,a.Lk)("option",{value:"item"},"아이템",-1)])],40,Lt),[[i.u1,e.type]]),(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":t=>e.name=t,class:"ing-name",disabled:!e.type},[t[21]||(t[21]=(0,a.Lk)("option",{value:""},"선택하세요",-1)),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.getAvailableNames(e.type),e=>((0,a.uX)(),(0,a.CE)("option",{key:e,value:e},(0,m.v_)(e),9,Et))),128))],8,Dt),[[i.u1,e.name]]),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t=>e.count=t,type:"number",min:"1",placeholder:"개수",class:"ing-count"},null,8,wt),[[i.Jo,e.count,void 0,{number:!0}]]),(0,a.Lk)("button",{onClick:e=>r.removeIngredient(n),class:"remove-ing-btn",disabled:1===s.formData.ingredients.length}," 삭제 ",8,xt)]))),128)),(0,a.Lk)("button",{onClick:t[9]||(t[9]=(...e)=>r.addIngredient&&r.addIngredient(...e)),class:"add-ing-btn"},"+ 재료 추가")])])])):(0,a.Q3)("",!0),0===r.filteredProducts.length?((0,a.uX)(),(0,a.CE)("div",Tt,(0,m.v_)(s.searchQuery?"검색 결과가 없습니다.":"가공품이 없습니다."),1)):((0,a.uX)(),(0,a.CE)("div",Xt,[(0,a.Lk)("table",Pt,[t[23]||(t[23]=(0,a.Lk)("thead",null,[(0,a.Lk)("tr",null,[(0,a.Lk)("th",null,"이름"),(0,a.Lk)("th",null,"건물"),(0,a.Lk)("th",null,"난이도"),(0,a.Lk)("th",null,"구매"),(0,a.Lk)("th",null,"재료"),(0,a.Lk)("th",null,"작업")])],-1)),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.filteredProducts,e=>((0,a.uX)(),(0,a.CE)("tr",{key:e.id,class:(0,m.C4)({"custom-product":e.isCustom}),style:(0,m.Tr)(r.getDifficultyStyle(e.difficulty))},[(0,a.Lk)("td",{class:(0,m.C4)(["name-cell",{clickable:e.isCustom}]),onDblclick:t=>e.isCustom&&r.startEdit(e),title:e.isCustom?"더블클릭하여 수정":"기본 가공품은 수정할 수 없습니다"},(0,m.v_)(e.name),43,Ft),(0,a.Lk)("td",St,(0,m.v_)(e.building),1),(0,a.Lk)("td",Mt,[(0,a.Lk)("span",{class:"difficulty-badge",style:(0,m.Tr)(r.getDifficultyBadgeStyle(e.difficulty))},(0,m.v_)(e.difficulty),5)]),(0,a.Lk)("td",At,[e.purchasable&&e.price?((0,a.uX)(),(0,a.CE)("span",_t,(0,m.v_)(e.price)+"P ",1)):((0,a.uX)(),(0,a.CE)("span",jt,"-"))]),(0,a.Lk)("td",$t,[(0,a.Lk)("div",Qt,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.ingredients,(e,t)=>((0,a.uX)(),(0,a.CE)("span",{key:t,class:(0,m.C4)(["ingredient-tag",r.getIngredientTypeClass(e.type,e.name)]),title:r.getIngredientTypeLabel(e.type,e.name)},(0,m.v_)(r.getIngredientTypeLabel(e.type,e.name))+": "+(0,m.v_)(e.name)+" × "+(0,m.v_)(e.count),11,Rt))),128))])]),(0,a.Lk)("td",Kt,[e.isCustom?((0,a.uX)(),(0,a.CE)("div",Ot,[(0,a.Lk)("button",{onClick:t=>r.confirmDelete(e),class:"delete-btn",title:"삭제"}," 삭제 ",8,Nt)])):(0,a.Q3)("",!0)])],6))),128))])])])),s.productToDelete?((0,a.uX)(),(0,a.CE)("div",{key:3,class:"modal-overlay",onClick:t[13]||(t[13]=(...e)=>r.cancelDelete&&r.cancelDelete(...e))},[(0,a.Lk)("div",{class:"modal-content",onClick:t[12]||(t[12]=(0,i.D$)(()=>{},["stop"]))},[t[25]||(t[25]=(0,a.Lk)("h3",null,"⚠️ 가공품 삭제 확인",-1)),(0,a.Lk)("p",null,[(0,a.Lk)("strong",null,'"'+(0,m.v_)(s.productToDelete.name)+'"',1),t[24]||(t[24]=(0,a.eW)("을(를) 정말로 삭제하시겠습니까?",-1))]),t[26]||(t[26]=(0,a.Lk)("p",{class:"warning-text"},"이 작업은 되돌릴 수 없습니다.",-1)),(0,a.Lk)("div",Ut,[(0,a.Lk)("button",{onClick:t[10]||(t[10]=(...e)=>r.executeDelete&&r.executeDelete(...e)),class:"confirm-btn"},"네, 삭제합니다"),(0,a.Lk)("button",{onClick:t[11]||(t[11]=(...e)=>r.cancelDelete&&r.cancelDelete(...e)),class:"cancel-btn"},"취소")])])])):(0,a.Q3)("",!0)])}const qt=["응고제","소금","발효액","이스트","달걀","우유","뽕잎"],Jt="realfarm_custom_items";var Bt={name:"ProductList",emits:["edit-product","product-deleted"],data(){return{searchQuery:"",productToDelete:null,showAddForm:!1,editingProduct:null,products:[],crops:[],customItems:[],formData:{id:"",name:"",building:"",purchasable:!1,price:null,ingredients:[{type:"crop",name:"",count:1}]}}},created(){this.refreshData()},computed:{allProducts(){return this.products.map(e=>({...e,difficulty:this.calculateProductDifficulty(e),purchasable:e.purchasable||!1,price:e.price||null})).sort((e,t)=>e.name.localeCompare(t.name))},availableCrops(){return this.crops.map(e=>e.name).sort()},availableProducts(){return this.products.map(e=>e.name).sort()},availableItems(){const e=qt,t=this.customItems.map(e=>e.name),n=new Map;return e.forEach(e=>n.set(e,e)),t.forEach(e=>n.set(e,e)),Array.from(n.values()).sort()},filteredProducts(){if(!this.searchQuery.trim())return this.allProducts;const e=this.searchQuery.toLowerCase().trim();return this.allProducts.filter(t=>!!t.name.toLowerCase().includes(e)||(!!t.building.toLowerCase().includes(e)||!!t.ingredients.some(t=>t.name.toLowerCase().includes(e))))}},methods:{refreshData(){this.products=X(),this.crops=M(),this.customItems=this.getCustomItems()},getCustomItems(){try{const e=localStorage.getItem(Jt);return e?JSON.parse(e):[]}catch(e){return console.error("Failed to load custom items:",e),[]}},getAvailableNames(e){return"crop"===e?this.availableCrops:"product"===e?this.availableProducts:"item"===e?this.availableItems:[]},calculateProductDifficulty(e,t=this.products){if(!e||!e.ingredients)return 0;const n=new Set,i=e=>{if(!e||n.has(e.name))return 0;n.add(e.name);let a=0;return e.ingredients.forEach(e=>{let n=e.type;if(n||(n=this.availableItems.includes(e.name)||$(e.name)?"item":Ye(t,e.name)?"product":"crop"),"crop"===n)a+=j(e.name)*e.count;else if("product"===n){const n=Ye(t,e.name);n&&(a+=i(n)*e.count)}}),a};return i(e)},getIngredientTypeLabel(e,t){return"item"===e||$(t)?"아이템":"product"===e?"가공품":"작물"},getIngredientTypeClass(e,t){return"item"===e||$(t)?"item":"product"===e?"product":"crop"},getDifficultyBadgeStyle(e){const t=100,n=Math.min(e/t,1),i=102,a=187,o=106,s=Math.floor(i-30*n),r=Math.floor(a-50*n),c=Math.floor(o-30*n);return{backgroundColor:`rgb(${s}, ${r}, ${c})`}},getDifficultyStyle(e){const t=100,n=Math.min(e/t,1),i=232,a=245,o=233,s=Math.floor(i-50*n),r=Math.floor(a-40*n),c=Math.floor(o-30*n);return{backgroundColor:`rgb(${s}, ${r}, ${c})`}},startEdit(e){e.isCustom&&(this.editingProduct&&this.editingProduct.id===e.id||(this.editingProduct=e,this.showAddForm=!0,this.formData={id:e.id,name:e.name,building:e.building,purchasable:e.purchasable||!1,price:e.price||null,ingredients:e.ingredients.map(e=>{let t=e.type;return t||(t=this.availableItems.includes(e.name)||$(e.name)?"item":Ye(this.products,e.name)?"product":"crop"),{type:t,name:e.name,count:e.count}})}))},cancelForm(){this.showAddForm=!1,this.editingProduct=null,this.formData={id:"",name:"",building:"",purchasable:!1,price:null,ingredients:[{type:"crop",name:"",count:1}]}},addIngredient(){this.formData.ingredients.push({type:"crop",name:"",count:1})},removeIngredient(e){this.formData.ingredients.length>1&&this.formData.ingredients.splice(e,1)},saveProduct(){if(!this.formData.id.trim()||!this.formData.name.trim()||!this.formData.building.trim())return void alert("ID, 이름, 건물을 모두 입력해주세요.");if(this.formData.ingredients.some(e=>!e.name.trim()||e.count<1))return void alert("재료 정보를 올바르게 입력해주세요.");const e={id:this.formData.id.trim(),name:this.formData.name.trim(),building:this.formData.building.trim(),purchasable:this.formData.purchasable||!1,price:this.formData.purchasable&&this.formData.price?parseInt(this.formData.price):null,ingredients:this.formData.ingredients.map(e=>({type:e.type,name:e.name.trim(),count:parseInt(e.count)}))};let t;t=this.editingProduct?F(this.editingProduct.id,e):P(e),t.success?(this.$emit("product-deleted"),this.refreshData(),this.cancelForm()):alert(t.error||"저장에 실패했습니다.")},editProduct(e){this.$emit("edit-product",e)},confirmDelete(e){e.isCustom?this.productToDelete=e:alert("기본 가공품은 삭제할 수 없습니다.")},cancelDelete(){this.productToDelete=null},executeDelete(){if(this.productToDelete){const e=S(this.productToDelete.id);e.success?(this.$emit("product-deleted"),this.refreshData(),this.productToDelete=null):alert(e.error)}}}};const Wt=(0,U.A)(Bt,[["render",Vt],["__scopeId","data-v-1d25df28"]]);var Gt=Wt;const zt={class:"crop-list"},Zt={class:"list-header"},Ht={class:"header-actions"},Yt={class:"search-box"},en={key:0,class:"form-section"},tn={class:"form-row"},nn={class:"form-group"},an={class:"form-group"},on={class:"form-group form-actions"},sn={key:1,class:"empty-message"},rn={key:2,class:"table-container"},cn={class:"crops-table"},ln=["onDblclick"],un={key:0},dn=["onKeydown"],mn=["onDblclick"],pn=["onKeydown"],hn={class:"actions-cell"},fn={key:0,class:"action-buttons"},gn=["onClick"],yn={key:1,class:"action-buttons"},bn=["onClick"],kn={class:"modal-actions"};function vn(e,t,n,o,s,r){return(0,a.uX)(),(0,a.CE)("div",zt,[(0,a.Lk)("div",Zt,[t[15]||(t[15]=(0,a.Lk)("h2",null,"작물 목록",-1)),(0,a.Lk)("div",Ht,[(0,a.Lk)("div",Yt,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>s.searchQuery=e),type:"text",placeholder:"작물 이름으로 검색...",class:"search-input"},null,512),[[i.Jo,s.searchQuery]])]),(0,a.Lk)("button",{onClick:t[1]||(t[1]=e=>s.showAddForm=!0),class:"add-btn"}," + 작물 추가 ")])]),s.showAddForm&&!s.editingCrop?((0,a.uX)(),(0,a.CE)("div",en,[t[18]||(t[18]=(0,a.Lk)("h3",null,"작물 추가",-1)),(0,a.Lk)("div",tn,[(0,a.Lk)("div",nn,[t[16]||(t[16]=(0,a.Lk)("label",null,"이름:",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>s.formData.name=e),type:"text",placeholder:"예: 벼"},null,512),[[i.Jo,s.formData.name]])]),(0,a.Lk)("div",an,[t[17]||(t[17]=(0,a.Lk)("label",null,"난이도:",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>s.formData.difficulty=e),type:"number",min:"0",placeholder:"예: 1"},null,512),[[i.Jo,s.formData.difficulty,void 0,{number:!0}]])]),(0,a.Lk)("div",on,[(0,a.Lk)("button",{onClick:t[4]||(t[4]=(...e)=>r.saveCrop&&r.saveCrop(...e)),class:"save-btn"},"저장"),(0,a.Lk)("button",{onClick:t[5]||(t[5]=(...e)=>r.cancelForm&&r.cancelForm(...e)),class:"cancel-btn"},"취소")])])])):(0,a.Q3)("",!0),0===r.filteredCrops.length?((0,a.uX)(),(0,a.CE)("div",sn,(0,m.v_)(s.searchQuery?"검색 결과가 없습니다.":"작물이 없습니다."),1)):((0,a.uX)(),(0,a.CE)("div",rn,[(0,a.Lk)("table",cn,[t[19]||(t[19]=(0,a.Lk)("thead",null,[(0,a.Lk)("tr",null,[(0,a.Lk)("th",null,"이름"),(0,a.Lk)("th",null,"난이도"),(0,a.Lk)("th",null,"작업")])],-1)),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.filteredCrops,e=>((0,a.uX)(),(0,a.CE)("tr",{key:e.name,class:(0,m.C4)({"custom-crop":e.isCustom,editing:s.editingCrop===e.name}),style:(0,m.Tr)(r.getDifficultyStyle(s.editingCrop===e.name?s.editFormData.difficulty:e.difficulty))},[(0,a.Lk)("td",{class:"name-cell",onDblclick:t=>r.startEdit(e),title:"더블클릭하여 수정"},[s.editingCrop!==e.name?((0,a.uX)(),(0,a.CE)("span",un,(0,m.v_)(e.name),1)):(0,a.bo)(((0,a.uX)(),(0,a.CE)("input",{key:1,"onUpdate:modelValue":t[6]||(t[6]=e=>s.editFormData.name=e),type:"text",class:"inline-input",disabled:!0,title:"기본 작물은 이름을 변경할 수 없습니다",onKeydown:[(0,i.jR)(t=>r.saveEditCrop(e),["enter"]),t[7]||(t[7]=(0,i.jR)((...e)=>r.cancelEdit&&r.cancelEdit(...e),["esc"]))]},null,40,dn)),[[i.Jo,s.editFormData.name]])],40,ln),(0,a.Lk)("td",{class:"difficulty-cell",onDblclick:t=>r.startEdit(e),title:"더블클릭하여 수정"},[s.editingCrop!==e.name?((0,a.uX)(),(0,a.CE)("span",{key:0,class:"difficulty-badge",style:(0,m.Tr)(r.getDifficultyBadgeStyle(e.difficulty))},(0,m.v_)(e.difficulty),5)):(0,a.bo)(((0,a.uX)(),(0,a.CE)("input",{key:1,"onUpdate:modelValue":t[8]||(t[8]=e=>s.editFormData.difficulty=e),type:"number",min:"0",class:"inline-input inline-number",onKeydown:[(0,i.jR)(t=>r.saveEditCrop(e),["enter"]),t[9]||(t[9]=(0,i.jR)((...e)=>r.cancelEdit&&r.cancelEdit(...e),["esc"]))],ref_for:!0,ref:"difficultyInput"},null,40,pn)),[[i.Jo,s.editFormData.difficulty,void 0,{number:!0}]])],40,mn),(0,a.Lk)("td",hn,[s.editingCrop!==e.name&&e.isCustom?((0,a.uX)(),(0,a.CE)("div",fn,[(0,a.Lk)("button",{onClick:t=>r.confirmDelete(e),class:"delete-btn",title:"삭제"}," 삭제 ",8,gn)])):s.editingCrop===e.name?((0,a.uX)(),(0,a.CE)("div",yn,[(0,a.Lk)("button",{onClick:t=>r.saveEditCrop(e),class:"save-btn-small"}," 저장 ",8,bn),(0,a.Lk)("button",{onClick:t[10]||(t[10]=(...e)=>r.cancelEdit&&r.cancelEdit(...e)),class:"cancel-btn-small"}," 취소 ")])):(0,a.Q3)("",!0)])],6))),128))])])])),s.cropToDelete?((0,a.uX)(),(0,a.CE)("div",{key:3,class:"modal-overlay",onClick:t[14]||(t[14]=(...e)=>r.cancelDelete&&r.cancelDelete(...e))},[(0,a.Lk)("div",{class:"modal-content",onClick:t[13]||(t[13]=(0,i.D$)(()=>{},["stop"]))},[t[21]||(t[21]=(0,a.Lk)("h3",null,"⚠️ 작물 삭제 확인",-1)),(0,a.Lk)("p",null,[(0,a.Lk)("strong",null,'"'+(0,m.v_)(s.cropToDelete.name)+'"',1),t[20]||(t[20]=(0,a.eW)("을(를) 정말로 삭제하시겠습니까?",-1))]),t[22]||(t[22]=(0,a.Lk)("p",{class:"warning-text"},"이 작업은 되돌릴 수 없습니다.",-1)),(0,a.Lk)("div",kn,[(0,a.Lk)("button",{onClick:t[11]||(t[11]=(...e)=>r.executeDelete&&r.executeDelete(...e)),class:"confirm-btn"},"네, 삭제합니다"),(0,a.Lk)("button",{onClick:t[12]||(t[12]=(...e)=>r.cancelDelete&&r.cancelDelete(...e)),class:"cancel-btn"},"취소")])])])):(0,a.Q3)("",!0)])}var Cn={name:"CropList",emits:["data-changed"],data(){return{searchQuery:"",cropToDelete:null,showAddForm:!1,editingCrop:null,crops:[],formData:{name:"",difficulty:1},editFormData:{name:"",difficulty:1}}},created(){this.refreshData()},computed:{allCrops(){return this.crops},filteredCrops(){if(!this.searchQuery.trim())return this.allCrops;const e=this.searchQuery.toLowerCase().trim();return this.allCrops.filter(t=>t.name.toLowerCase().includes(e))}},methods:{refreshData(){this.crops=M().sort((e,t)=>e.name.localeCompare(t.name))},getDifficultyStyle(e){const t=100,n=Math.min(e/t,1),i=232,a=245,o=233,s=Math.floor(i-50*n),r=Math.floor(a-40*n),c=Math.floor(o-30*n);return{backgroundColor:`rgb(${s}, ${r}, ${c})`}},getDifficultyBadgeStyle(e){const t=100,n=Math.min(e/t,1),i=102,a=187,o=106,s=Math.floor(i-30*n),r=Math.floor(a-50*n),c=Math.floor(o-30*n);return{backgroundColor:`rgb(${s}, ${r}, ${c})`}},startEdit(e){this.editingCrop!==e.name&&(this.editingCrop=e.name,this.editFormData={name:e.name,difficulty:e.difficulty||1},this.$nextTick(()=>{const t=this.$refs.difficultyInput;if(t&&t.length>0){const n=this.filteredCrops.findIndex(t=>t.name===e.name);t[n]&&(t[n].focus(),t[n].select())}}))},cancelEdit(){this.editingCrop=null,this.editFormData={name:"",difficulty:1}},cancelForm(){this.showAddForm=!1,this.formData={name:"",difficulty:1}},saveEditCrop(e){if(this.editFormData.difficulty<0)return void alert("난이도를 올바르게 입력해주세요.");const t=A(),n=t.findIndex(t=>t.name===e.name),i={name:e.name,difficulty:parseInt(this.editFormData.difficulty)||1};e.isCustom,n>=0?t[n]=i:t.push(i);const a=_(t);a?(this.$emit("data-changed"),this.refreshData(),this.cancelEdit()):alert("저장에 실패했습니다.")},saveCrop(){if(!this.formData.name.trim()||this.formData.difficulty<0)return void alert("이름과 난이도를 올바르게 입력해주세요.");const e=A(),t=e.findIndex(e=>e.name===this.formData.name.trim());if(t>=0)return void alert("이미 존재하는 작물입니다.");const n={name:this.formData.name.trim(),difficulty:parseInt(this.formData.difficulty)||1};e.push(n);const i=_(e);i?(this.$emit("data-changed"),this.refreshData(),this.cancelForm()):alert("저장에 실패했습니다.")},confirmDelete(e){e.isCustom?this.cropToDelete=e:alert("기본 작물은 삭제할 수 없습니다.")},cancelDelete(){this.cropToDelete=null},executeDelete(){if(this.cropToDelete){const e=A(),t=e.filter(e=>e.name!==this.cropToDelete.name),n=_(t);n?(this.$emit("data-changed"),this.refreshData(),this.cropToDelete=null):alert("삭제에 실패했습니다.")}}}};const In=(0,U.A)(Cn,[["render",vn],["__scopeId","data-v-5e564dd1"]]);var Ln=In;const Dn={class:"item-list"},En={class:"list-header"},wn={class:"header-actions"},xn={class:"search-box"},Tn={key:0,class:"form-section"},Xn={class:"form-row"},Pn={class:"form-group"},Fn={class:"form-group"},Sn={class:"form-group form-actions"},Mn={key:1,class:"empty-message"},An={key:2,class:"table-container"},_n={class:"items-table"},jn=["onDblclick"],$n={key:0},Qn=["onKeydown"],Rn={class:"difficulty-cell"},Kn={class:"actions-cell"},On={key:0,class:"action-buttons"},Nn=["onClick"],Un={key:1,class:"action-buttons"},Vn=["onClick"],qn={class:"modal-actions"};function Jn(e,t,n,o,s,r){return(0,a.uX)(),(0,a.CE)("div",Dn,[(0,a.Lk)("div",En,[t[13]||(t[13]=(0,a.Lk)("h2",null,"아이템 목록",-1)),(0,a.Lk)("div",wn,[(0,a.Lk)("div",xn,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>s.searchQuery=e),type:"text",placeholder:"아이템 이름으로 검색...",class:"search-input"},null,512),[[i.Jo,s.searchQuery]])]),(0,a.Lk)("button",{onClick:t[1]||(t[1]=e=>s.showAddForm=!0),class:"add-btn"}," + 아이템 추가 ")])]),s.showAddForm&&!s.editingItem?((0,a.uX)(),(0,a.CE)("div",Tn,[t[16]||(t[16]=(0,a.Lk)("h3",null,"아이템 추가",-1)),(0,a.Lk)("div",Xn,[(0,a.Lk)("div",Pn,[t[14]||(t[14]=(0,a.Lk)("label",null,"이름:",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>s.formData.name=e),type:"text",placeholder:"예: 응고제"},null,512),[[i.Jo,s.formData.name]])]),(0,a.Lk)("div",Fn,[t[15]||(t[15]=(0,a.Lk)("label",null,"난이도:",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>s.formData.difficulty=e),type:"number",min:"0",value:"0",disabled:"",title:"아이템은 난이도가 항상 0입니다"},null,512),[[i.Jo,s.formData.difficulty,void 0,{number:!0}]])]),(0,a.Lk)("div",Sn,[(0,a.Lk)("button",{onClick:t[4]||(t[4]=(...e)=>r.saveItem&&r.saveItem(...e)),class:"save-btn"},"저장"),(0,a.Lk)("button",{onClick:t[5]||(t[5]=(...e)=>r.cancelForm&&r.cancelForm(...e)),class:"cancel-btn"},"취소")])])])):(0,a.Q3)("",!0),0===r.filteredItems.length?((0,a.uX)(),(0,a.CE)("div",Mn,(0,m.v_)(s.searchQuery?"검색 결과가 없습니다.":"아이템이 없습니다."),1)):((0,a.uX)(),(0,a.CE)("div",An,[(0,a.Lk)("table",_n,[t[17]||(t[17]=(0,a.Lk)("thead",null,[(0,a.Lk)("tr",null,[(0,a.Lk)("th",null,"이름"),(0,a.Lk)("th",null,"난이도"),(0,a.Lk)("th",null,"작업")])],-1)),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.filteredItems,e=>((0,a.uX)(),(0,a.CE)("tr",{key:e.name,class:(0,m.C4)({"custom-item":e.isCustom,editing:s.editingItem===e.name}),style:(0,m.Tr)(r.getDifficultyStyle(0))},[(0,a.Lk)("td",{class:"name-cell",onDblclick:t=>r.startEdit(e),title:"더블클릭하여 수정"},[s.editingItem!==e.name?((0,a.uX)(),(0,a.CE)("span",$n,(0,m.v_)(e.name),1)):(0,a.bo)(((0,a.uX)(),(0,a.CE)("input",{key:1,"onUpdate:modelValue":t[6]||(t[6]=e=>s.editFormData.name=e),type:"text",class:"inline-input",disabled:!0,title:"기본 아이템은 이름을 변경할 수 없습니다",onKeydown:[(0,i.jR)(t=>r.saveEditItem(e),["enter"]),t[7]||(t[7]=(0,i.jR)((...e)=>r.cancelEdit&&r.cancelEdit(...e),["esc"]))]},null,40,Qn)),[[i.Jo,s.editFormData.name]])],40,jn),(0,a.Lk)("td",Rn,[(0,a.Lk)("span",{class:"difficulty-badge",style:(0,m.Tr)(r.getDifficultyBadgeStyle(0))}," 0 ",4)]),(0,a.Lk)("td",Kn,[s.editingItem!==e.name&&e.isCustom?((0,a.uX)(),(0,a.CE)("div",On,[(0,a.Lk)("button",{onClick:t=>r.confirmDelete(e),class:"delete-btn",title:"삭제"}," 삭제 ",8,Nn)])):s.editingItem===e.name?((0,a.uX)(),(0,a.CE)("div",Un,[(0,a.Lk)("button",{onClick:t=>r.saveEditItem(e),class:"save-btn-small"}," 저장 ",8,Vn),(0,a.Lk)("button",{onClick:t[8]||(t[8]=(...e)=>r.cancelEdit&&r.cancelEdit(...e)),class:"cancel-btn-small"}," 취소 ")])):(0,a.Q3)("",!0)])],6))),128))])])])),s.itemToDelete?((0,a.uX)(),(0,a.CE)("div",{key:3,class:"modal-overlay",onClick:t[12]||(t[12]=(...e)=>r.cancelDelete&&r.cancelDelete(...e))},[(0,a.Lk)("div",{class:"modal-content",onClick:t[11]||(t[11]=(0,i.D$)(()=>{},["stop"]))},[t[19]||(t[19]=(0,a.Lk)("h3",null,"⚠️ 아이템 삭제 확인",-1)),(0,a.Lk)("p",null,[(0,a.Lk)("strong",null,'"'+(0,m.v_)(s.itemToDelete.name)+'"',1),t[18]||(t[18]=(0,a.eW)("을(를) 정말로 삭제하시겠습니까?",-1))]),t[20]||(t[20]=(0,a.Lk)("p",{class:"warning-text"},"이 작업은 되돌릴 수 없습니다.",-1)),(0,a.Lk)("div",qn,[(0,a.Lk)("button",{onClick:t[9]||(t[9]=(...e)=>r.executeDelete&&r.executeDelete(...e)),class:"confirm-btn"},"네, 삭제합니다"),(0,a.Lk)("button",{onClick:t[10]||(t[10]=(...e)=>r.cancelDelete&&r.cancelDelete(...e)),class:"cancel-btn"},"취소")])])])):(0,a.Q3)("",!0)])}const Bn=["응고제","소금","발효액","이스트","달걀","우유","뽕잎"],Wn="realfarm_custom_items";var Gn={name:"ItemList",emits:["data-changed"],data(){return{searchQuery:"",itemToDelete:null,showAddForm:!1,editingItem:null,items:[],formData:{name:"",difficulty:0},editFormData:{name:"",difficulty:0}}},created(){this.refreshData()},computed:{allItems(){return this.items},filteredItems(){if(!this.searchQuery.trim())return this.allItems;const e=this.searchQuery.toLowerCase().trim();return this.allItems.filter(t=>t.name.toLowerCase().includes(e))}},methods:{refreshData(){const e=Bn.map(e=>({name:e,difficulty:0,isCustom:!1})),t=this.getCustomItems().map(e=>({...e,difficulty:0,isCustom:!0})),n=new Map;e.forEach(e=>{n.set(e.name,e)}),t.forEach(e=>{n.set(e.name,e)}),this.items=Array.from(n.values()).sort((e,t)=>e.name.localeCompare(t.name))},getCustomItems(){try{const e=localStorage.getItem(Wn);return e?JSON.parse(e):[]}catch(e){return console.error("Failed to load custom items:",e),[]}},saveCustomItems(e){try{return localStorage.setItem(Wn,JSON.stringify(e)),!0}catch(t){return console.error("Failed to save custom items:",t),!1}},getDifficultyStyle(e){return{backgroundColor:"rgb(240, 248, 255)"}},getDifficultyBadgeStyle(e){return{backgroundColor:"rgb(102, 126, 234)"}},startEdit(e){this.editingItem!==e.name&&(this.editingItem=e.name,this.editFormData={name:e.name,difficulty:0})},cancelEdit(){this.editingItem=null,this.editFormData={name:"",difficulty:0}},cancelForm(){this.showAddForm=!1,this.formData={name:"",difficulty:0}},saveEditItem(e){const t=this.getCustomItems(),n=t.findIndex(t=>t.name===e.name),i={name:e.name,difficulty:0};if(e.isCustom)n>=0?t[n]=i:t.push(i);else{if(!(n>=0))return void this.cancelEdit();t[n]=i}const a=this.saveCustomItems(t);a?(this.$emit("data-changed"),this.refreshData(),this.cancelEdit()):alert("저장에 실패했습니다.")},saveItem(){if(!this.formData.name.trim())return void alert("이름을 입력해주세요.");const e=this.getCustomItems(),t=e.findIndex(e=>e.name===this.formData.name.trim());if(t>=0)return void alert("이미 존재하는 아이템입니다.");const n={name:this.formData.name.trim(),difficulty:0};e.push(n);const i=this.saveCustomItems(e);i?(this.$emit("data-changed"),this.refreshData(),this.cancelForm()):alert("저장에 실패했습니다.")},confirmDelete(e){e.isCustom?this.itemToDelete=e:alert("기본 아이템은 삭제할 수 없습니다.")},cancelDelete(){this.itemToDelete=null},executeDelete(){if(this.itemToDelete){const e=this.getCustomItems(),t=e.filter(e=>e.name!==this.itemToDelete.name),n=this.saveCustomItems(t);n?(this.$emit("data-changed"),this.refreshData(),this.itemToDelete=null):alert("삭제에 실패했습니다.")}}}};const zn=(0,U.A)(Gn,[["render",Jn],["__scopeId","data-v-681b64dc"]]);var Zn=zn;const Hn={class:"navigation"},Yn={class:"nav-list"},ei=["onClick","title"],ti={class:"shortcut-hint"};function ni(e,t,n,i,o,s){return(0,a.uX)(),(0,a.CE)("nav",Hn,[(0,a.Lk)("ul",Yn,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(o.menuItems,(e,t)=>((0,a.uX)(),(0,a.CE)("li",{key:e.id,class:(0,m.C4)([{active:n.currentTab===e.id},"nav-item"]),onClick:t=>s.switchTab(e.id),title:`${e.label} (${t+1}번 키 또는 Ctrl+${t+1})`},[(0,a.eW)((0,m.v_)(e.label)+" ",1),(0,a.Lk)("span",ti,"("+(0,m.v_)(t+1)+")",1)],10,ei))),128))])])}var ii={name:"Navigation",props:{currentTab:{type:String,required:!0}},emits:["tab-change"],data(){return{menuItems:[{id:"search",label:"검색"},{id:"list",label:"가공품 목록"},{id:"crops",label:"작물 목록"},{id:"items",label:"아이템 목록"},{id:"data",label:"데이터 관리"}]}},methods:{switchTab(e){this.$emit("tab-change",e)}}};const ai=(0,U.A)(ii,[["render",ni],["__scopeId","data-v-5cf7bb76"]]);var oi=ai;const si={class:"data-management"},ri={class:"actions"},ci={class:"action-group"},li={class:"action-group"};function ui(e,t,n,i,o,s){return(0,a.uX)(),(0,a.CE)("div",si,[t[7]||(t[7]=(0,a.Lk)("h2",null,"데이터 관리",-1)),t[8]||(t[8]=(0,a.Lk)("div",{class:"info-box"},[(0,a.Lk)("p",null,"가공품 데이터는 브라우저의 localStorage에 자동으로 저장됩니다."),(0,a.Lk)("p",null,"백업을 위해 JSON 파일로 내보내거나, 다른 기기에서 가져올 수 있습니다.")],-1)),(0,a.Lk)("div",ri,[(0,a.Lk)("div",ci,[t[3]||(t[3]=(0,a.Lk)("h3",null,"내보내기",-1)),t[4]||(t[4]=(0,a.Lk)("p",null,"현재 저장된 가공품 데이터를 JSON 파일로 다운로드합니다.",-1)),(0,a.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>s.handleExport&&s.handleExport(...e)),class:"export-btn"},"데이터 내보내기")]),(0,a.Lk)("div",li,[t[5]||(t[5]=(0,a.Lk)("h3",null,"가져오기",-1)),t[6]||(t[6]=(0,a.Lk)("p",null,"JSON 파일에서 가공품 데이터를 불러옵니다. (기존 데이터와 병합됩니다)",-1)),(0,a.Lk)("input",{ref:"fileInput",type:"file",accept:".json",onChange:t[1]||(t[1]=(...e)=>s.handleImport&&s.handleImport(...e)),style:{display:"none"}},null,544),(0,a.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>s.triggerFileInput&&s.triggerFileInput(...e)),class:"import-btn"},"데이터 가져오기")])]),o.message?((0,a.uX)(),(0,a.CE)("div",{key:0,class:(0,m.C4)(["message",o.messageType])},(0,m.v_)(o.message),3)):(0,a.Q3)("",!0)])}var di={name:"DataManagement",emits:["data-changed"],data(){return{message:null,messageType:"info"}},methods:{handleExport(){const e=Q();e.success?this.showMessage("데이터가 성공적으로 내보내졌습니다.","success"):this.showMessage(e.error||"내보내기에 실패했습니다.","error")},triggerFileInput(){this.$refs.fileInput.click()},async handleImport(e){const t=e.target.files[0];if(!t)return;if(!t.name.endsWith(".json"))return void this.showMessage("JSON 파일만 업로드할 수 있습니다.","error");const n=await R(t);n.success?(this.showMessage(`데이터 가져오기 완료! ${n.imported}개 항목을 가져왔습니다. (총 ${n.total}개)`,"success"),this.$emit("data-changed"),e.target.value=""):(this.showMessage(n.error||"가져오기에 실패했습니다.","error"),e.target.value="")},showMessage(e,t="info"){this.message=e,this.messageType=t,setTimeout(()=>{this.message=null},5e3)}}};const mi=(0,U.A)(di,[["render",ui],["__scopeId","data-v-4fd8d90c"]]);var pi=mi;function hi(e,t){return fi([{name:e,quantity:t}])}function fi(e){const t=X(),n=[],i=[],a=[];if(e.forEach(({name:e,quantity:o})=>{const s=Ye(t,e);if(!s)return void n.push(`가공품 "${e}"을(를) 찾을 수 없습니다.`);a.push({name:e,quantity:o,product:s});const r=et(t,e);i.push(...r)}),n.length>0)return{error:n.join("\n"),crops:{},intermediateProducts:{},buildingGroups:{},targetProducts:[]};const o=[],s=new Set;i.forEach(e=>{s.has(e.name)||(s.add(e.name),o.push(e))});const r={},c={},l={},u=tt(o);function d(e,n){e&&e.ingredients.forEach(e=>{let i=e.type;if(i||(i=$(e.name)?"item":Ye(t,e.name)?"product":"crop"),"crop"===i){const t=e.name;r[t]=(r[t]||0)+e.count*n}else if("item"===i){const t=e.name;c[t]=(c[t]||0)+e.count*n}else if("product"===i){const i=Ye(t,e.name);if(i){const t=e.count*n;l[e.name]=(l[e.name]||0)+t,d(i,t)}}})}function m(e){if(!e)return 0;const n=new Set;function i(e){if(!e||n.has(e.name))return 0;n.add(e.name);let a=0;return e.ingredients.forEach(e=>{let n=e.type;if(n||(n=$(e.name)?"item":Ye(t,e.name)?"product":"crop"),"crop"===n)a+=j(e.name)*e.count;else if("product"===n){const n=Ye(t,e.name);n&&(a+=i(n)*e.count)}}),a}return i(e)}a.forEach(({product:e,quantity:t})=>{d(e,t),l[e.name]=(l[e.name]||0)+t});const p={};return o.forEach(e=>{p[e.name]=m(e)}),a.forEach(({product:e})=>{p[e.name]||(p[e.name]=m(e))}),{targetProducts:a.map(({name:e,quantity:t})=>({name:e,quantity:t})),crops:r,items:c,intermediateProducts:l,buildingGroups:u,dependencyChain:o,productDifficulties:p}}function gi(e){if(e.error)return e;const t=Object.entries(e.crops||{}).map(([e,t])=>({name:e,count:Math.ceil(t),difficulty:j(e)})),n=Object.entries(e.items||{}).map(([e,t])=>({name:e,count:Math.ceil(t),difficulty:0})),i=Object.entries(e.intermediateProducts||{}).map(([t,n])=>{const i=Ye(X(),t);return{name:t,count:Math.ceil(n),difficulty:e.productDifficulties?.[t]||0,purchasable:i?.purchasable||!1,price:i?.price||null}}).sort((t,n)=>{const i=e.dependencyChain.findIndex(e=>e.name===t.name),a=e.dependencyChain.findIndex(e=>e.name===n.name);return(-1===i?999:i)-(-1===a?999:a)}),a=Object.entries(e.buildingGroups||{}).map(([e,t])=>({building:e,products:t.map(e=>e.name)}));return{...e,formattedCrops:t,formattedItems:n,formattedProducts:i,formattedBuildings:a}}var yi={name:"App",components:{SearchForm:q,ResultDisplay:rt,ProductList:Gt,CropList:Ln,ItemList:Zn,Navigation:oi,DataManagement:pi},data(){return{currentTab:"search",result:null}},methods:{switchTab(e){this.currentTab=e},handleKeyboardShortcuts(e){const t=document.activeElement,n=t&&("INPUT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable);if((e.ctrlKey||e.metaKey)&&e.key>="1"&&e.key<="5"){e.preventDefault();const t=parseInt(e.key)-1,n=["search","list","crops","items","data"];return void(n[t]&&this.switchTab(n[t]))}if(!n&&e.key>="1"&&e.key<="5"&&!e.ctrlKey&&!e.metaKey&&!e.altKey&&!e.shiftKey){e.preventDefault();const t=parseInt(e.key)-1,n=["search","list","crops","items","data"];n[t]&&this.switchTab(n[t])}},handleSearch(e){if(Array.isArray(e)){const t=fi(e);this.result=gi(t)}else{const{productName:t,quantity:n}=e,i=hi(t,n);this.result=gi(i)}},handleProductAdded(){if(this.result)if(this.result.targetProducts&&this.result.targetProducts.length>0){const e=fi(this.result.targetProducts);this.result=gi(e)}else if(this.result.targetProduct){const e=hi(this.result.targetProduct,this.result.targetQuantity);this.result=gi(e)}},handleProductDeleted(){this.handleProductAdded()},handleDataChanged(){this.handleProductAdded()}},mounted(){document.addEventListener("keydown",this.handleKeyboardShortcuts)},beforeUnmount(){document.removeEventListener("keydown",this.handleKeyboardShortcuts)}};const bi=(0,U.A)(yi,[["render",d]]);var ki=bi;(0,i.Ef)(ki).mount("#app")}},t={};function n(i){var a=t[i];if(void 0!==a)return a.exports;var o=t[i]={exports:{}};return e[i](o,o.exports,n),o.exports}n.m=e,function(){var e=[];n.O=function(t,i,a,o){if(!i){var s=1/0;for(u=0;u<e.length;u++){i=e[u][0],a=e[u][1],o=e[u][2];for(var r=!0,c=0;c<i.length;c++)(!1&o||s>=o)&&Object.keys(n.O).every(function(e){return n.O[e](i[c])})?i.splice(c--,1):(r=!1,o<s&&(s=o));if(r){e.splice(u--,1);var l=a();void 0!==l&&(t=l)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[i,a,o]}}(),function(){n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={524:0};n.O.j=function(t){return 0===e[t]};var t=function(t,i){var a,o,s=i[0],r=i[1],c=i[2],l=0;if(s.some(function(t){return 0!==e[t]})){for(a in r)n.o(r,a)&&(n.m[a]=r[a]);if(c)var u=c(n)}for(t&&t(i);l<s.length;l++)o=s[l],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(u)},i=self["webpackChunkrealfarm_helper"]=self["webpackChunkrealfarm_helper"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=n.O(void 0,[504],function(){return n(347)});i=n.O(i)})();